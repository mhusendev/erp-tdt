import{u as d,x as l,m as c,y as o,S as s}from"./index-ZXAHIXJB.js";var u={VITE_API_BASE_URL:"https://auth-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_BASE_URL2:"https://backend-dani-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_AUTH_URL:"https://backend-keycloak-erp-tdt.cws.co.id/keycloak/api",VITE_APP_MODE:"dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const t=d(),r=u,n={getByQuotation:"/purchase-order?quotation_id=",post:"/purchase-order",search:"/purchase-order?search=",getbyid:"/purchase-order/",put:"/purchase-order/",uploadCustPO:"/purchase-order/upload-cust-po/",uploadVendQT:"/purchase-order/upload-vendor-quotation/",approvePl:"/purchase-order/approve/"},i={headers:{Authorization:`Bearer ${t.access_token}`}},h=l({id:"purhcase-order",state:()=>c({data_po:[],loading:!1,headers:[],message:"",dataEdit:{},totalPage:0,currentPage:1,perPage:0,dataSearch:[],itemTemp:[],dataDetail:{}}),getters:{setValuedata(a){this.data_po=a}},actions:{approvePL(a){o.put(r.VITE_API_BASE_URL2+n.approvePl+a,{},i).then(e=>{this.message="Berhasil Approve PL",new s({position:"top-end",html:'<p style="color:#ffff">success save data!</p>',showConfirmButton:!1,background:"green",timer:1500})}).catch(e=>{console.error("Error:",e),t.sessionFail(e.response.data.message),this.message="gagal Approve PL",new s({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})},setLoading(a){this.loading=a},async UploadCustPO(a,e){try{(await o.put(r.VITE_API_BASE_URL2+n.uploadCustPO+a,e,i)).status!==200&&new s({position:"top-end",html:'<p style="color:#ffff">failed upload file customer po!</p>',background:"red",showConfirmButton:!1,timer:1500}),new s({position:"top-end",html:'<p style="color:#ffff">success upload file customer po!</p>',showConfirmButton:!1,background:"green",timer:1500})}catch(p){t.sessionFail(p.response.data.message),console.log(p)}},async UploadVendQT(a,e){try{(await o.put(r.VITE_API_BASE_URL2+n.uploadVendQT+a,e,i)).status!==200&&new s({position:"top-end",html:'<p style="color:#ffff">failed upload file vendor QT!</p>',background:"red",showConfirmButton:!1,timer:1500}),new s({position:"top-end",html:'<p style="color:#ffff">success upload file vendor QT!</p>',showConfirmButton:!1,background:"green",timer:1500})}catch(p){t.sessionFail(p.response.data.message),console.log(p)}},async getData(a){try{this.setLoading(!0);const e=await o.get(r.VITE_API_BASE_URL2+n.getByQuotation+a,i);this.data_po=e.data.data}catch(e){t.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},async getById(a){try{const e=await o.get(r.VITE_API_BASE_URL2+n.getbyid+a,i);this.dataDetail=e.data.data}catch(e){t.sessionFail(e.response.data.message),console.log(e)}},async PostData(a){console.log(JSON.stringify(a)),o.post(r.VITE_API_BASE_URL2+n.post,a,i).then(e=>{this.message="Berhasil Input Data",new s({position:"top-end",html:'<p style="color:#ffff">success save data!</p>',showConfirmButton:!1,background:"green",timer:1500}),window.location.href="/purchase-order/upload/"+e.data.data.po_id}).catch(e=>{console.error("Error:",e),t.sessionFail(e.response.data.message),this.message="gagal Input Data",new s({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})},async Search(a){try{this.setLoading(!0);const e=await o.get(r.VITE_API_BASE_URL2+n.search+a,i);return this.dataSearch=e.data.data,e.data.data}catch(e){t.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},PutData(a){o.put(r.VITE_API_BASE_URL2+n.put+a.brand_id,a,i).then(e=>{this.message="Berhasil Input Data",new s({text:"Berhasil",icon:"success"})}).catch(e=>{console.error("Error:",e),t.sessionFail(e.response.data.message),this.message="gagal Input Data",new s({text:"Gagal",icon:"warning"})})}}});export{h as u};
