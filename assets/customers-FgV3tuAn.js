import{u as c,x as d,m as p,y as s,S as n}from"./index-H1euUr_g.js";var l={VITE_API_BASE_URL:"https://auth-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_BASE_URL2:"https://backend-dani-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_AUTH_URL:"https://backend-keycloak-erp-tdt.cws.co.id/keycloak/api",VITE_API_PDF:"https://report-erp-tdt.cws.co.id/erp-tdt/api",VITE_APP_MODE:"dev",VITE_APP_:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const e=c(),o=l,r={getAll:"/customers?page=",post:"/customers",search:"/customers?search=",search_pic:"/customer-pic?search="},i={headers:{Authorization:`Bearer ${e.access_token}`}},g=d({id:"customers",state:()=>p({data_customers:[],loading:!1,headers:[],message:"",dataEdit:{},totalPage:0,currentPage:1,perPage:0,dataSearch:[],dataSeacrhPIC:[]}),getters:{setValuedata(t){this.data_customers=t}},actions:{setLoading(t){this.loading=t},async getData(t){t&&(this.currentPage=t);try{this.setLoading(!0);const a=await s.get(o.VITE_API_BASE_URL+r.getAll+this.currentPage,i);this.currentPage=parseInt(a.data.metadata.current_page),this.totalPage=parseInt(a.data.metadata.total_pages),this.perPage=parseInt(a.data.metadata.per_page),this.data_customers=a.data.data}catch(a){e.sessionFail(a.response.data.message),console.log(a)}finally{this.setLoading(!1)}},async Search(t){try{this.setLoading(!0);const a=await s.get(o.VITE_API_BASE_URL+r.search+t,i);return this.dataSearch=a.data.data,a.data.data}catch(a){e.sessionFail(a.response.data.message),console.log(a)}finally{this.setLoading(!1)}},async SearchPIC(t){try{this.setLoading(!0);const a=await s.get(o.VITE_API_BASE_URL+r.search_pic+t,i);return this.dataSearchPIC=a.data.data,a.data.data}catch(a){e.sessionFail(a.response.data.message),console.log(a)}finally{this.setLoading(!1)}},PostData(t){console.log(JSON.stringify(t)),s.post(o.VITE_API_BASE_URL+r.post,t,i).then(a=>{this.message="Berhasil Input Data",new n({position:"top-end",html:'<p style="color:#ffff">success save data!</p>',showConfirmButton:!1,background:"green",timer:1500}),window.location.href="/master/customers"}).catch(a=>{console.error("Error:",a),e.sessionFail(a.response.data.message),this.message="gagal Input Data",new n({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})}}});export{g as u};
