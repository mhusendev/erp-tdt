import{D as V}from"./Default-d0e4HpWU.js";import{_ as j}from"./Icon-VU5_f3pB.js";import{_ as J,c as I,w as d,r as c,o as _,b as m,a as t,j as l,t as a,d as P,l as R,F as z,p as Y,k as A}from"./index-TigB9G6n.js";import{u as E}from"./projects-UF9LriFg.js";import{u as G}from"./products-CqdcZA2O.js";import{u as H}from"./brands-tHYyR9iP.js";import{u as U}from"./quotations-PHCXSjw6.js";import{u as K}from"./vendors-Vms0ZGJ3.js";import{u as W}from"./profits-QWChSUJA.js";import{u as X}from"./sales-orders-9eSqHrK0.js";import{I as Z}from"./InputField-W9V7FrGE.js";import{u as $}from"./progress-43trrj9G.js";import{M as tt}from"./MenuCard-J8MP6whG.js";import{B as et}from"./ButtonLink-K0ry74hT.js";import{B as st}from"./Button-M7AQ9lGO.js";import{L as ot}from"./Loading-9eCSlWTS.js";import{s as at}from"./default.css_vue_type_style_index_0_src_true_lang-3Bj2T2GE.js";import{D as rt}from"./DataTable-gPtzjYCJ.js";import{M as nt}from"./Modal-PLo6O90p.js";import{T as it}from"./TextArea-Pr_-qU7W.js";import{T as lt}from"./TextCurrency-JzIQa8s0.js";import{S as ct}from"./Stepper-NCM8WCpj.js";import"./Pagination-8q04iTOk.js";const L=$();E();G();H();U();K();const g=W(),B=X(),pt={components:{TextCurrency:lt,Default:V,Icon:j,MenuCard:tt,ButtonLink:et,Button:st,Loading:ot,InputField:Z,DataTable:rt,Modal:nt,Multiselect:at,TextArea:it,Stepper:ct},data(){return{aprove:!1,stepper_menu:[{label:"QT",complete:!1,link:"/quotation/detail/"},{label:"PL",complete:!1,link:"/profit-and-loss/detail/"},{label:"SO",complete:!1,link:"/sales-order/detail/"},{label:"PO",complete:!1,link:"/purchase-order/"},{label:"RG",complete:!1,link:"/receive-list/"},{label:"DO",complete:!1,link:"/delivery-order/"},{label:"IV",complete:!1,link:"/invoice/so/"}],file1:null,file2:null,dataSO:{},loading:!1}},methods:{async updateStepper(){var p;let e=JSON.parse(localStorage.getItem("progress"));await L.getData(e[0].idQT);let o=await L.data_progress;o&&(p=o[1])!=null&&p.status&&(this.isPLexist=!0),await localStorage.setItem("progress",JSON.stringify(o))},formatDateTime(e){const o=new Date(e),p=o.getDate().toString().padStart(2,"0"),S=(o.getMonth()+1).toString().padStart(2,"0"),s=o.getFullYear().toString().slice(-2),n=o.getHours().toString().padStart(2,"0"),h=o.getMinutes().toString().padStart(2,"0"),f=o.getSeconds().toString().padStart(2,"0");return`${p}/${S}/${s} ${n}:${h}:${f}`},formatCurrency(e){return e?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e):"Rp.0"},handleFileChange1(e){this.file1=e.target.files[0]},handleFileChange2(e){this.file2=e.target.files[0]},async checkPL(){var e,o;await g.getData((o=(e=this.dataSO.profit_and_loss)==null?void 0:e.quotation)==null?void 0:o.quotation_id),console.log("ini data",g.data_profit),g.data_profit.status!==1&&(this.aprove=!0)},async setStepper(){let e=await JSON.parse(localStorage.getItem("progress"));this.stepper_menu[0].complete=e[0].status,this.stepper_menu[0].link=this.stepper_menu[0].link+e[0].idQT,this.stepper_menu[1].complete=e[1].status,this.stepper_menu[1].link=this.stepper_menu[1].link+e[1].idQT,this.stepper_menu[2].complete=e[2].status,this.stepper_menu[2].link=this.stepper_menu[2].link+e[2].idPL,this.stepper_menu[3].complete=e[3].status,this.stepper_menu[3].link=this.stepper_menu[3].link+e[3].idQT,this.stepper_menu[4].complete=e[4].status,this.stepper_menu[4].link=this.stepper_menu[4].link+e[4].idQT,this.stepper_menu[5].complete=e[5].status,this.stepper_menu[5].link=this.stepper_menu[5].link+e[5].idSO,this.stepper_menu[6].complete=e[6].status,this.stepper_menu[6].link=this.stepper_menu[6].link+e[6].idSO}},async created(){this.loading=!0,await this.updateStepper(),await B.getById(this.$route.params.id),this.dataSO=await B.dataDetail,await this.checkPL(),await this.setStepper(),this.loading=!1,console.log(this.dataSO)}},r=e=>(Y("data-v-17d7efd4"),e=e(),A(),e),ut={class:"flex gap-5"},dt={class:"px-20 py-10 w-full flex justify-center items-center"},_t={class:"w-full px-10 py-10 bg-white rounded-xl mt-5"},mt={class:"w-full flex justify-between"},ht={class:"w-full"},ft={class:"font-bold text-lg mb-5"},gt=r(()=>t("b",null,"SO Number #:",-1)),St=r(()=>t("b",null,"SO Date #:",-1)),yt=r(()=>t("b",null,"Quotation #:",-1)),xt=r(()=>t("b",null,"Quotation Date #:",-1)),bt=r(()=>t("b",null,"Customer PO Number #:",-1)),kt=r(()=>t("br",null,null,-1)),wt={class:"flex w-1/2 gap-5 justify-center items-center"},Ot=r(()=>t("hr",null,null,-1)),Dt=r(()=>t("br",null,null,-1)),Tt={class:"w-full mt-10"},vt={class:"relative overflow-x-auto"},Ct=r(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 font-semibold"}," List Items ",-1)),qt={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},It=r(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Product "),t("th",{scope:"col",class:"px-6 py-3"}," QTY "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Unit Price "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Total Price ")])],-1)),Pt={class:"px-6 py-4 text-xs"},Lt={class:"mb-2"},Bt={class:""},Nt={class:"px-6 py-4"},Qt={class:"px-6 py-4 text-right"},Mt={class:"px-6 py-4 text-right"},Ft={class:"bg-white border-b"},Vt=r(()=>t("td",{colspan:"3",class:"px-6 py-4 text-right"},[t("b",null," Subtotal")],-1)),jt={class:"px-6 py-4 text-right"},Jt={class:"bg-white border-b"},Rt=r(()=>t("td",{colspan:"3",class:"px-6 py-4 text-right"},[t("b",null," PPN")],-1)),zt={class:"px-6 py-4 text-right"},Yt={class:"bg-white border-b"},At=r(()=>t("td",{colspan:"3",class:"px-6 py-4 text-right"},[t("b",null," Total")],-1)),Et={class:"px-6 py-4 text-right"};function Gt(e,o,p,S,s,n){const h=c("Loading"),f=c("ButtonLink"),N=c("MenuCard"),Q=c("Stepper"),M=c("Button"),F=c("Default");return s.loading?(_(),I(h,{key:0})):(_(),I(F,{key:1},{default:d(()=>{var y,x,b,k,w,O,D,T,v,C,q;return[m(N,{menuLabel:"Sales Order"},{default:d(()=>{var i,u;return[t("div",ut,[m(f,{type:"secondary",size:"small",to:"/purchase-order/"+((u=(i=s.dataSO.profit_and_loss)==null?void 0:i.quotation)==null?void 0:u.quotation_id)},{default:d(()=>[l(" Next")]),_:1},8,["to"])])]}),_:1}),t("div",dt,[m(Q,{menu:s.stepper_menu},null,8,["menu"])]),t("div",_t,[t("div",mt,[t("div",ht,[t("h1",ft,a((b=(x=(y=s.dataSO)==null?void 0:y.profit_and_loss)==null?void 0:x.customer)==null?void 0:b.customer_name),1),t("h1",null,[gt,l(" "+a(s.dataSO.so_number),1)]),t("h1",null,[St,l(" "+a(n.formatDateTime(s.dataSO.so_date)),1)]),t("h1",null,[yt,l(" "+a((O=(w=(k=s.dataSO)==null?void 0:k.profit_and_loss)==null?void 0:w.quotation)==null?void 0:O.quotation_number),1)]),t("h1",null,[xt,l(" "+a(n.formatDateTime((v=(T=(D=s.dataSO)==null?void 0:D.profit_and_loss)==null?void 0:T.quotation)==null?void 0:v.quotation_date))+" ",1),t("h1",null,[bt,l(" "+a((q=(C=s.dataSO)==null?void 0:C.profit_and_loss)==null?void 0:q.cust_po_number),1)])]),kt]),t("div",wt,[m(M,{type:"secondary",class:"w-fit h-fit",c:"",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:d(()=>[l(" Download SO ")]),_:1},8,["onClick"])])]),Ot,Dt,t("div",Tt,[t("div",vt,[Ct,t("table",qt,[It,t("tbody",null,[(_(!0),P(z,null,R(s.dataSO.sales_order_items,(i,u)=>(_(),P("tr",{class:"bg-white border-b",key:u},[t("td",Pt,[t("h1",Lt,a(i.quotation_item.product.product_number),1),t("h1",Bt,a(i.quotation_item.product.product_description),1)]),t("td",Nt,a(i.quotation_item.quantity+" "+i.quotation_item.uom),1),t("td",Qt,a(n.formatCurrency(i.quotation_item.unit_price)),1),t("td",Mt,a(n.formatCurrency(i.quotation_item.total_price)),1)]))),128)),t("tr",Ft,[Vt,t("td",jt,a(n.formatCurrency(s.dataSO.grand_total)),1)]),t("tr",Jt,[Rt,t("td",zt,a(n.formatCurrency(s.dataSO.grand_total*s.dataSO.ppn/100)),1)]),t("tr",Yt,[At,t("td",Et,a(n.formatCurrency(s.dataSO.grand_total*s.dataSO.ppn/100+s.dataSO.grand_total)),1)])])])])])])]}),_:1}))}const fe=J(pt,[["render",Gt],["__scopeId","data-v-17d7efd4"]]);export{fe as default};
