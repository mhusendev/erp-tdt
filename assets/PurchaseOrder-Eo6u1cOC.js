import{D as v}from"./Default-LfTR1VjV.js";import{_ as w}from"./Icon-aDk_KqCg.js";import{r as l,o as g,b as S,w as _,a as u,d as f,j as O}from"./index-3VIsnPTN.js";import{u as T}from"./projects-bfIeDXOj.js";import{u as P}from"./quotations-DKV3vdtf.js";import{u as x}from"./purchase-orders-Dw_HkDBj.js";import{u as I}from"./profits-CfWhkcUx.js";import{u as L}from"./sales-orders-tqon6XcB.js";import{I as C}from"./InputField-7BnCext7.js";import{M as B}from"./MenuCard-iMsFtknn.js";import{B as M}from"./ButtonLink-9IpDKwVO.js";import{B as V}from"./Button-fTGUJeva.js";import{L as $}from"./Loading-sJ64mZn0.js";import{s as j}from"./default.css_vue_type_style_index_0_src_true_lang-7xlbMjmG.js";import{D as A}from"./DataTable-aefNwkh5.js";import{M as N}from"./Modal-eH2qysXC.js";import{T as Q}from"./TextArea-Y7UasRCk.js";import{T as F}from"./TextCurrency-KJDE1gIN.js";import{S as q}from"./Stepper-DyQ-U5va.js";import{_ as R}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./Pagination-pdYa9xhx.js";T();P();const h=x(),D=I();L();const E={components:{TextCurrency:F,Default:v,Icon:w,MenuCard:B,ButtonLink:M,Button:V,Loading:$,InputField:C,DataTable:A,Modal:N,Multiselect:j,TextArea:Q,Stepper:q},data(){return{body:[],label_head:[],aprove:!1,stepper_menu:[{label:"QT",complete:!1,link:"/quotation/detail/"},{label:"PL",complete:!1,link:"/profit-and-loss/detail/"},{label:"SO",complete:!1,link:"/sales-order/detail/"},{label:"PO",complete:!1,link:"/purchase-order/"},{label:"RG",complete:!1,link:"/receive-list/"},{label:"DO",complete:!1,link:"/delivery-order/"},{label:"IV",complete:!1,link:"/invoice/so/"}],file1:null,file2:null,dataPO:{},loading:!1}},methods:{async setStepper(){var t,s,o,r,a,i,n,p,m,c,d,y,k,b;let e=await JSON.parse(localStorage.getItem("progress"));e&&(this.stepper_menu[0].complete=(t=e[0])==null?void 0:t.status,this.stepper_menu[0].link=this.stepper_menu[0].link+((s=e[0])==null?void 0:s.idQT),this.stepper_menu[1].complete=(o=e[1])==null?void 0:o.status,this.stepper_menu[1].link=this.stepper_menu[1].link+((r=e[1])==null?void 0:r.idQT),this.stepper_menu[2].complete=(a=e[2])==null?void 0:a.status,this.stepper_menu[2].link=this.stepper_menu[2].link+((i=e[2])==null?void 0:i.idPL),this.stepper_menu[3].complete=(n=e[3])==null?void 0:n.status,this.stepper_menu[3].link=this.stepper_menu[3].link+((p=e[3])==null?void 0:p.idQT),this.stepper_menu[4].complete=(m=e[4])==null?void 0:m.status,this.stepper_menu[4].link=this.stepper_menu[4].link+((c=e[4])==null?void 0:c.idQT),this.stepper_menu[5].complete=(d=e[5])==null?void 0:d.status,this.stepper_menu[5].link=this.stepper_menu[5].link+((y=e[5])==null?void 0:y.idSO),this.stepper_menu[6].complete=(k=e[6])==null?void 0:k.status,this.stepper_menu[6].link=this.stepper_menu[6].link+((b=e[6])==null?void 0:b.idSO))},toDetail(e,t){this.$router.push("/purchase-order/detail/"+h.data_po[e].po_id)},formatDateTime(e){const t=new Date(e),s=t.getDate().toString().padStart(2,"0"),o=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear().toString().slice(-2),a=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0"),n=t.getSeconds().toString().padStart(2,"0");return`${s}/${o}/${r} ${a}:${i}:${n}`},formatCurrency(e){return e?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e):"Rp.0"},handleFileChange1(e){this.file1=e.target.files[0]},handleFileChange2(e){this.file2=e.target.files[0]},async checkPL(){await D.getData(this.$route.params.id),D.data_profit.status!==1&&(this.aprove=!0)},async filterDataforTable(){const e=["createdAt","updatedAt","history","vendor_id","quotation_id","vendor_pic_name","vendor_pic_email","vendor_pic_id","inv_vendor_attachment","so_id","project_id","receive_type","po_id"],t=await h.data_po.map(s=>Object.fromEntries(Object.entries(s).filter(([r])=>!e.includes(r))));for(let s in t)t[s].total=this.formatCurrency(t[s].total);return t},reorderedArray(e){let t=["po_number","project_name","customer_po_number","vendor_name","so_number","total","ppn","po_status"];return e.map(s=>{const o={};for(const r of t)s.hasOwnProperty(r)&&(o[r]=s[r]);return o})}},async created(){this.loading=!0,await this.checkPL(),await this.setStepper(),await h.getData(this.$route.params.id),this.dataPO.quotation_id=this.$route.params.id,this.body=await this.filterDataforTable(),this.body=await this.reorderedArray(this.body),this.body.forEach(e=>{let t=Object.keys(e);this.label_head=t}),this.loading=!1,console.log(this.dataPO)}},z={class:"flex gap-5"},G={class:"px-20 py-10 w-full flex justify-center items-center"},H={class:"w-full px-10 py-10 bg-white"};function J(e,t,s,o,r,a){const i=l("Loading"),n=l("ButtonLink"),p=l("MenuCard"),m=l("Stepper"),c=l("DataTable"),d=l("Default");return r.loading?(g(),S(i,{key:0})):(g(),S(d,{key:1},{default:_(()=>[u(p,{menuLabel:"Purchase Order"},{default:_(()=>[f("div",z,[u(n,{type:"secondary",size:"small",to:"/receive-list/"+r.dataPO.quotation_id},{default:_(()=>[O(" Next")]),_:1},8,["to"])])]),_:1}),f("div",G,[u(m,{menu:r.stepper_menu},null,8,["menu"])]),f("div",H,[u(c,{theads:r.label_head,items:r.body,btnView:!0,onView:a.toDetail},null,8,["theads","items","onView"])])]),_:1}))}const fe=R(E,[["render",J],["__scopeId","data-v-e5c19fc1"]]);export{fe as default};
