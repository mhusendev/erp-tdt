import{D as L}from"./Default-SnYXce0r.js";import{_ as B}from"./Icon-Jn8JfFO8.js";import{_ as N,f as k,c as _,w as S,r as m,o as n,b as c,a as e,h as F,s as j,d as u,g as w,z as R,i as q,t as p,l as I,F as D,j as z,p as U,k as A}from"./index-zNN2oSXV.js";import{u as E}from"./projects-tobxMXGL.js";import{u as G}from"./quotations-PJnJ-Ljd.js";import{u as Q}from"./purchase-orders-GuxSbtAN.js";import{u as K}from"./profits-MG7iqzmv.js";import{u as H}from"./sales-orders-QhQKUHa6.js";import{u as Y}from"./receive-goods-wwosUj76.js";import{I as J}from"./InputField-8O8zhtvs.js";import{M as W}from"./MenuCard-si4DgcMV.js";import{B as X}from"./ButtonLink-lOTu3OkL.js";import{B as Z}from"./Button-Nlr5QnjH.js";import{L as $}from"./Loading-SVqbFMk-.js";import{s as ee}from"./default.css_vue_type_style_index_0_src_true_lang-mMztfpja.js";import{D as te}from"./DataTable-YIr7e0Qr.js";import{M as se}from"./Modal-Egd1_BWl.js";import{T as ae}from"./TextArea-pgYTDawa.js";import{T as oe}from"./TextCurrency-RLa14qax.js";import{S as le}from"./Stepper-nks7oq9_.js";import"./Pagination-niETu5eI.js";E();G();const P=Q(),re=K();H();const y=Y();let r=[];const ie={components:{TextCurrency:oe,Default:L,Icon:B,MenuCard:W,ButtonLink:X,Button:Z,Loading:$,InputField:J,DataTable:te,Modal:se,Multiselect:ee,TextArea:ae,Stepper:le},data(){return{vendorDOModel:{},body:[],warnLimit:!1,label_head:[],manualChecked:!0,aprove:!1,stepper_menu:[{label:"QT",complete:!0,link:""},{label:"PL",complete:!0,link:""},{label:"SO",complete:!1,link:""},{label:"PO",complete:!1,link:""},{label:"RG",complete:!1,link:""},{label:"DO",complete:!1,link:""},{label:"INV",complete:!1,link:""}],file1:null,file2:null,dataPO:{},dataPO2:{},dataRG:[],loading:!1,isModalOpen:!1,formserial:k(""),indexSerial:""}},methods:{formatDateTime(t){const s=new Date(t),o=s.getDate().toString().padStart(2,"0"),x=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getFullYear().toString().slice(-2),d=s.getHours().toString().padStart(2,"0"),v=s.getMinutes().toString().padStart(2,"0"),O=s.getSeconds().toString().padStart(2,"0");return`${o}/${x}/${a} ${d}:${v}:${O}`},formatCurrency(t){return t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t):"Rp.0"},handleFileChange1(t){this.file1=t.target.files[0]},handleFileChange2(t){this.file2=t.target.files[0]},async CheckStepper(){this.aprove=!0,this.stepper_menu[2].complete=!0,this.stepper_menu[3].complete=!0,this.stepper_menu[4].complete=!0,this.stepper_menu[2].link="/sales-order/detail/"+re.data_profit.pl_id},async filterDataforTable(){const t=["createdAt","updatedAt","history","vendor_id","quotation_id","vendor_name","vendor_pic_name","vendor_pic_email","vendor_pic_id","inv_vendor_attachment","so_id","project_id","receive_type","po_id"],s=await P.data_po.map(o=>Object.fromEntries(Object.entries(o).filter(([a])=>!t.includes(a))));for(let o in s)s[o].total=this.formatCurrency(s[o].total);return s},ModalSerial(t){this.isModalOpen=!0,this.indexSerial=t,console.log(t),r=[],console.log(r)},ScanSerial(t){if(parseInt(r.length)+parseInt(this.dataPO[t].qtyIn)>=this.dataPO[t].qtyOrder)this.warnLimit=!0,setTimeout(()=>{this.warnLimit=!1},2e3);else if(this.formserial!=="")if(this.dataPO[t].serial_numbers){r=this.dataPO[t].serial_numbers,r.push(this.formserial);let o=r;this.dataPO[t].serial_numbers=o}else{r.push(this.formserial);let o=r;this.dataPO[t].serial_numbers=o}this.formserial=k(""),console.log(this.dataPO)},removeItem(t,s){this.dataPO[this.indexSerial].serial_numbers=this.dataPO[this.indexSerial].serial_numbers.filter(o=>o!==t)},EnterSerial(t){if(parseInt(r.length)+parseInt(this.dataPO[t].qtyIn)>=this.dataPO[t].qtyOrder)this.warnLimit=!0,setTimeout(()=>{this.warnLimit=!1},2e3);else if(this.formserial!=="")if(this.dataPO[t].serial_numbers){r=this.dataPO[t].serial_numbers,r.push(this.formserial);let o=r;this.dataPO[t].serial_numbers=o}else{r.push(this.formserial);let o=r;this.dataPO[t].serial_numbers=o}this.formserial=k(""),console.log(this.dataPO)},async SaveData(){let t=await{project_id:this.dataPO2.project_id,po_id:this.dataPO2.po_id,vendor_do_number:this.vendorDOModel.do_number,receive_date:this.vendorDOModel.receive_date,stock_in_items:this.dataPO};y.PostData(t)},itemSave(){this.isModalOpen=!1,this.arraytest=[]}},async created(){this.loading=!0,await this.CheckStepper(),await y.getData(this.$route.params.id),this.dataRG.push(...y.data_rg),await y.listByPO(this.$route.params.id),this.dataPO=await y.list_rg,await P.getById(this.$route.params.id),this.dataPO2=await P.dataDetail,this.loading=!1,console.log(this.dataPO2)}},g=t=>(U("data-v-663e510e"),t=t(),A(),t),ne={class:"flex gap-5"},de={class:"h-fit px-10 py-10 w-[700px]"},ce={class:"flex justify-between gap-5 w-full"},pe={class:"w-fit bg-white border px-5 py-2 rounded-xl mb-10"},me=g(()=>e("p",{class:"text-xs border-b mb-2"},"Scan",-1)),ue={for:"toggle",class:"flex items-center cursor-pointer"},he={key:0,class:"mr-2 text-gray-700 text-xs"},_e={key:1,class:"mr-2 text-gray-700 text-xs"},fe={key:0,class:"bg-red-500 text-white text-center py-3 mb-10"},ye={class:"mt-2 px-3"},ge={class:"relative overflow-x-auto h-[300px]"},be={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},xe=g(()=>e("thead",{class:"sticky top-0 text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Serial Number "),e("th",{scope:"col",class:"px-6 py-3 text-center"}," # ")])],-1)),ve={class:"px-6 py-4"},Oe={class:"px-6 py-4 flex justify-end"},ke=g(()=>e("div",{class:"flex mt-10 justify-end"},null,-1)),Se={class:"w-full px-10 py-10 bg-white"},we={class:"w-full bg-gray-50 px-3 py-3"},Pe=g(()=>e("b",null,"PO Number #: ",-1)),Ce={class:"w-full grid grid-cols-2 gap-5 mt-5 bg-white"},Ie={class:"w-full mt-10"},De={class:"relative overflow-x-auto"},Me={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},Ve=g(()=>e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Product "),e("th",{scope:"col",class:"px-6 py-3"}," Qty Order "),e("th",{scope:"col",class:"px-6 py-3"}," Qty In "),e("th",{scope:"col",class:"px-6 py-3"}," Unite Price "),e("th",{scope:"col",class:"px-6 py-3"}," Total Price "),e("th",{scope:"col",class:"px-6 py-3"}," # ")])],-1)),Te={class:"px-6 py-4 text-xs"},Le={class:"mb-2"},Be={class:"px-6 py-4"},Ne={class:"px-6 py-4"},Fe={class:"px-6 py-4"},je={class:"px-6 py-4"},Re={class:"px-6 py-4"};function qe(t,s,o,x,a,d){const v=m("Loading"),O=m("ButtonLink"),f=m("Button"),M=m("MenuCard"),b=m("InputField"),V=m("Modal"),T=m("Default");return a.loading?(n(),_(v,{key:0})):(n(),_(T,{key:1},{default:S(()=>[c(M,{menuLabel:"Receive Form"},{default:S(()=>[e("div",ne,[c(O,{type:"secondary",icon_position:"left",size:"small",icon_name:"ArrowLeft",to:"/receive-goods/"+a.dataPO2.po_id},null,8,["to"]),c(f,{type:"success",onClick:s[0]||(s[0]=l=>d.SaveData()),class:"w-fit h-fit",icon_position:"left",size:"small",icon_name:"Save"})])]),_:1}),c(V,{show:a.isModalOpen,modalType:"primary",modalLabel:"Input Serial Number",onCloseModal:s[7]||(s[7]=()=>{this.isModalOpen=!1})},{default:S(()=>{var l,h;return[e("div",de,[e("div",null,[e("div",ce,[e("div",pe,[me,e("label",ue,[F(e("input",{type:"checkbox",id:"toggle",class:"hidden","onUpdate:modelValue":s[1]||(s[1]=i=>a.manualChecked=i)},null,512),[[j,a.manualChecked]]),a.manualChecked?w("",!0):(n(),u("div",he,"Off")),a.manualChecked?(n(),u("div",_e,"On")):w("",!0),e("div",{class:R([{"bg-indigo-500":a.manualChecked,"bg-gray-200":!a.manualChecked},"w-10 h-4 rounded-full shadow-inner transition-colors duration-300"])},null,2)])]),c(f,{type:"success",onClick:s[2]||(s[2]=i=>d.itemSave()),class:"w-fit h-fit",icon_position:"left",size:"small",icon_name:"Check"})]),a.warnLimit?(n(),u("div",fe,"Input Exceeds the order limit ")):w("",!0),a.manualChecked?(n(),_(b,{key:2,type:"text",class:"w-full",placeholder:"Scan Serial Number",onChange:s[5]||(s[5]=i=>d.ScanSerial(a.indexSerial)),modelValue:a.formserial,"onUpdate:modelValue":s[6]||(s[6]=i=>a.formserial=i)},null,8,["modelValue"])):(n(),_(b,{key:1,type:"text",class:"w-full",onKeyup:s[3]||(s[3]=q(i=>d.EnterSerial(a.indexSerial),["enter"])),placeholder:"Scan Serial Number",modelValue:a.formserial,"onUpdate:modelValue":s[4]||(s[4]=i=>a.formserial=i)},null,8,["modelValue"])),e("h1",ye," items scanned : "+p((h=(l=a.dataPO[a.indexSerial])==null?void 0:l.serial_numbers)==null?void 0:h.length),1),e("div",ge,[e("table",be,[xe,e("tbody",null,[(n(!0),u(D,null,I(a.dataPO[a.indexSerial].serial_numbers,(i,C)=>(n(),u("tr",{class:"bg-white border-b",key:C},[e("td",ve,p(i),1),e("td",Oe,[c(f,{type:"danger",onClick:ze=>d.removeItem(i,C),class:"w-fit h-fit",icon_position:"left",size:"small",icon_name:"Trash"},null,8,["onClick"])])]))),128))])])])]),ke])]}),_:1},8,["show"]),e("div",Se,[e("div",we,[Pe,z(p(a.dataPO2.po_number),1)]),e("div",Ce,[c(b,{type:"text",class:"w-full",placeholder:"Vendor DO Number",modelValue:a.vendorDOModel.do_number,"onUpdate:modelValue":s[8]||(s[8]=l=>a.vendorDOModel.do_number=l)},null,8,["modelValue"]),c(b,{type:"date",class:"w-full",placeholder:"Receive Date",modelValue:a.vendorDOModel.receive_date,"onUpdate:modelValue":s[9]||(s[9]=l=>a.vendorDOModel.receive_date=l)},null,8,["modelValue"])]),e("div",Ie,[e("div",De,[e("table",Me,[Ve,e("tbody",null,[(n(!0),u(D,null,I(a.dataPO,(l,h)=>(n(),u("tr",{class:"bg-white border-b",key:h},[e("td",Te,[e("h1",Le,p(l.product_number),1)]),e("td",Be,p(l.qtyOrder),1),e("td",Ne,p(l.qtyIn),1),e("td",Fe,p(d.formatCurrency(l.unit_price)),1),e("td",je,p(d.formatCurrency(l.total_price)),1),e("td",Re,[parseInt(l.qtyOrder)!==parseInt(l.qtyIn)?(n(),_(f,{key:0,type:"success",onClick:i=>d.ModalSerial(h),class:"w-fit h-fit",icon_position:"left",size:"small",icon_name:"PackagePlus"},null,8,["onClick"])):(n(),_(f,{key:1,type:"secondary",onClick:i=>d.ModalSerial(h),class:"w-fit h-fit",icon_position:"left",size:"small",icon_name:"PackagePlus",disabled:""},null,8,["onClick"]))])]))),128))])])])])])]),_:1}))}const nt=N(ie,[["render",qe],["__scopeId","data-v-663e510e"]]);export{nt as default};
