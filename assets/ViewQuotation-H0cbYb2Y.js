import{D as V}from"./Default-BQYD8_Ix.js";import{_ as M}from"./Icon-JtKGVolk.js";import{_ as O,f as B,c as f,w as c,r as u,o as i,b as m,a as t,d as n,j as _,t as s,g as R,l as E,F as G,p as U,k as H}from"./index-jErkSH92.js";import{u as J}from"./projects-jxuxNDd3.js";import{u as K}from"./products-vswYlDIi.js";import{u as W}from"./brands-kfNX3JLc.js";import{u as X}from"./quotations-T5MJbp8z.js";import{u as Y}from"./profits-rIYum_s1.js";import{I as Z}from"./InputField-gaHDi2mc.js";import{M as $}from"./MenuCard-fm8191j7.js";import{B as tt}from"./ButtonLink-v4Xigd-7.js";import{B as et}from"./Button-L2bFlQpT.js";import{L as ot}from"./Loading--kz6pXtx.js";import{s as st}from"./default.css_vue_type_style_index_0_src_true_lang-HReR-_qN.js";import{D as at}from"./DataTable-7BFAAARy.js";import{M as lt}from"./Modal-GHy1jzT4.js";import{T as it}from"./TextArea-xXqy_h2u.js";import{T as rt}from"./TextCurrency-sXabEbdO.js";import{S as ct}from"./Stepper-uSaRgYgb.js";import"./Pagination-yU6GMoj9.js";J();const y=K(),D=W(),h=X(),z=Y(),nt={components:{TextCurrency:rt,Default:V,Icon:M,MenuCard:$,ButtonLink:tt,Button:et,Loading:ot,InputField:Z,DataTable:at,Modal:lt,Multiselect:st,TextArea:it,Stepper:ct},data(){return{data:B(h.dataDetail),loading:!1,isPLexist:!1,stepper_menu:[{label:"QT",complete:!!localStorage.getItem("qt"),link:localStorage.getItem("qt")?localStorage.getItem("qt"):""},{label:"PL",complete:!!localStorage.getItem("pl"),link:localStorage.getItem("pl")?localStorage.getItem("pl"):""},{label:"SO",complete:!!localStorage.getItem("so"),link:localStorage.getItem("so")?localStorage.getItem("so"):""},{label:"PO",complete:!!localStorage.getItem("po"),link:localStorage.getItem("po")?localStorage.getItem("po"):""},{label:"RG",complete:!!localStorage.getItem("rg"),link:localStorage.getItem("rg")?localStorage.getItem("rg"):""},{label:"DO",complete:!!localStorage.getItem("do"),link:localStorage.getItem("do")?localStorage.getItem("do"):""},{label:"INV",complete:!!localStorage.getItem("inv"),link:localStorage.getItem("inv")?localStorage.getItem("inv"):""}],listQuotation:B(h.data_quotations),modelQuotation:{},uomOpt:[{label:"pcs",value:"pcs"},{label:"pack",value:"pack"},{label:"unit",value:"unit"}],term_opt:[{label:"--pilih--"},{label:"CBD"},{label:"COD"},{label:"DP"}],leadtime_opt:[{label:"--pilih--"},{label:"Indent"},{label:"Ready"}],formFields:[]}},methods:{async checkPL(){return await z.getData(this.$route.params.id),z.data_profit.length!=0?(this.stepper_menu[1].complete=!0,this.stepper_menu[1].link="/profit-and-loss/detail/"+this.$route.params.id,this.isPLexist=!0):this.isPLexist=!1},async Product(e){return await y.Search(e),this.products=y.dataSearch,await y.dataSearch.map(l=>({value:l.product_number,label:l.product_number}))},async Brands(e){return await D.Search(e),await D.dataSearch.map(l=>({value:l.brand_name,label:l.brand_name}))},formatPrice(e){return(e/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatCurrency(e){return e?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e):"Rp.0"},async searchArray(e,l,d){return await e.find(x=>x[l]===d)},async fillDesc(e,l){console.log(this.formFields[e][l].value),console.log(this.products);let d=await this.searchArray(this.products,"product_number",this.formFields[e][l].value);console.log(d),d==null?(this.formFields[e][1].label="product not exist! need  select brand",this.formFields[e][1].disable=!1):(this.formFields[e][1].value="",this.formFields[e][2].value=d.product_descriptionAa,this.formFields[e][1].label="product exist! not need brand",this.formFields[e][1].disable=!0),console.log(this.formFields[e][1])},addFormField(){const e=[{name:"product_number"+(this.formFields.length+1),label:"product number ",type:"product",value:""},{name:"brand_name"+(this.formFields.length+1),label:"Select Product First ",type:"brand",value:"",disable:!0},{name:"description"+(this.formFields.length+1),label:"description ",type:"text",value:""},{name:"quantity"+(this.formFields.length+1),label:"quantity ",type:"number",value:""},{name:"uom"+(this.formFields.length+1),label:"uom ",type:"select",options:this.uomOpt,value:""},{name:"unit_price"+(this.formFields.length+1),label:"unit price ",type:"currency",value:""}];this.formFields.push(e)},exitingItems(){for(let e in this.data.quotation_items)this.addFormField(),this.formFields[e][0].value={value:this.data.quotation_items[e].product.product_number,label:this.data.quotation_items[e].product.product_number},this.formFields[e][1].disable=!0,this.formFields[e][2].value=this.data.quotation_items[e].description,this.formFields[e][3].value=this.data.quotation_items[e].quantity,this.formFields[e][4].value=this.data.quotation_items[e].uom,this.formFields[e][5].value=this.data.quotation_items[e].unit_price},async ApproveQT(){await h.approveQT(this.data.quotation_id)}},async mounted(){},async created(){this.loading=!0;let e=await this.$route.params.id;await this.checkPL(),console.log(e),await h.getById(e),this.data=await h.dataDetail,console.log(this.data),this.modelQuotation=await this.data,this.exitingItems(),localStorage.setItem("qt",this.$route.path),this.loading=!1}},a=e=>(U("data-v-ac2ffd7c"),e=e(),H(),e),dt={class:"flex gap-5"},pt={key:0,class:"flex gap-3"},ut={key:1},mt={class:"px-20 py-10 w-full flex justify-center items-center"},_t={class:"w-full mt-10 bg-white shadow-lg rounded-lg px-5 py-5"},ht={class:"grid grid-cols-3 gap-5"},ft={class:"bg-white shadow-lg px-5 py-5 rounded-lg grid grid-rows-5 gap-1"},gt=a(()=>t("h1",{class:"border-b h-fit text-slate-700"},"Details",-1)),bt={class:"flex"},yt=a(()=>t("h1",{class:"capitalize w-32"},"customer name",-1)),xt={class:"flex"},wt=a(()=>t("h1",{class:"capitalize w-32"},"phone",-1)),vt={class:"flex"},St=a(()=>t("h1",{class:"capitalize w-32"},"Billing",-1)),kt={class:"flex"},It=a(()=>t("h1",{class:"capitalize w-32"},"shipping",-1)),Ft={class:"bg-white shadow-lg px-5 py-5 rounded-lg grid grid-rows-5 gap-1"},qt=a(()=>t("h1",{class:"border-b text-slate-700 h-fit"},"Contact",-1)),Ct={class:"flex"},Pt=a(()=>t("h1",{class:"capitalize w-32"},"contact name",-1)),Lt={class:"flex"},Bt=a(()=>t("h1",{class:"capitalize w-32"},"phone",-1)),Dt={class:"flex"},zt=a(()=>t("h1",{class:"capitalize w-32"},"email",-1)),Tt=["href"],Qt={class:"bg-white shadow-lg px-5 py-5 rounded-lg gap-1"},jt=a(()=>t("h1",{class:"border-b h-fit text-slate-700 h-fit"},"Status",-1)),At={class:"flex justify-center h-full items-center"},Nt={key:0,class:"text-5xl text-center text-xl"},Vt={key:1,class:"text-5xl text-center bg-red-600 text-white px-3 py-2 rounded"},Mt={key:2,class:"text-3xl text-center bg-green-600 text-white px-3 py-2 rounded"},Ot={class:"w-full bg-white px-5 py-5 mt-10"},Rt={class:"w-full flex justify-end"},Et={class:"w-full mt-10"},Gt={class:"relative overflow-x-auto"},Ut=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 font-semibold"}," List Items ",-1)),Ht={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},Jt=a(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Product "),t("th",{scope:"col",class:"px-6 py-3"}," Qty "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Unit Price "),t("th",{scope:"col",class:"px-6 py-3 text-center"}," Total Price ")])],-1)),Kt={class:"px-6 py-4 text-xs"},Wt={class:"mb-2"},Xt={class:""},Yt={class:"px-6 py-4"},Zt={class:"px-6 py-4 text-right"},$t={class:"px-6 py-4 text-right"},te={class:"bg-white border-b"},ee=a(()=>t("td",{colspan:"3",class:"px-6 py-4 text-right"},[t("b",null," Subtotal")],-1)),oe={class:"px-6 py-4 text-right"},se={class:"bg-white border-b"},ae=a(()=>t("td",{colspan:"3",class:"px-6 py-4 text-right"},[t("b",null," PPN")],-1)),le={class:"px-6 py-4 text-right"},ie={class:"bg-white border-b"},re=a(()=>t("td",{colspan:"3",class:"px-6 py-4 text-right"},[t("b",null," Total")],-1)),ce={class:"px-6 py-4 text-right"};function ne(e,l,d,x,o,p){const T=u("Loading"),g=u("ButtonLink"),b=u("Button"),Q=u("MenuCard"),j=u("Stepper"),A=u("Default");return o.loading?(i(),f(T,{key:0})):(i(),f(A,{key:1},{default:c(()=>{var w,v,S,k,I,F,q,C;return[m(Q,{menuLabel:o.data.quotation_number},{default:c(()=>[t("div",dt,[m(g,{type:"secondary",size:"small",icon_name:"ArrowBigLeft",icon_position:"left",link:!0,to:"/projects/detail/"+o.data.project_id},null,8,["to"]),o.data.status==1?(i(),n("div",pt,[m(b,{type:"success",onClick:p.ApproveQT,icon_position:"left",size:"small",icon_name:"Check"},{default:c(()=>[_(" Success ")]),_:1},8,["onClick"]),m(b,{type:"danger",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Ban"},{default:c(()=>[_(" Cancel ")]),_:1},8,["onClick"])])):(i(),n("div",ut,[o.isPLexist?(i(),f(g,{key:0,type:"secondary",to:"/profit-and-loss/detail/"+o.data.quotation_id},{default:c(()=>[_(" Profit & Loss ")]),_:1},8,["to"])):(i(),f(g,{key:1,type:"primary",icon_position:"left",size:"small",icon_name:"Plus",to:"/quotation/pl/"+o.data.quotation_id},{default:c(()=>[_("New Profit & Loss ")]),_:1},8,["to"]))]))])]),_:1},8,["menuLabel"]),t("div",mt,[m(j,{menu:o.stepper_menu},null,8,["menu"])]),t("div",_t,[t("div",ht,[t("div",ft,[gt,t("div",bt,[yt,t("p",null,":  "+s((w=o.data.customer)==null?void 0:w.customer_name),1)]),t("div",xt,[wt,t("p",null,":  "+s((v=o.data.customer)==null?void 0:v.telephone),1)]),t("div",vt,[St,t("p",null,":  "+s((S=o.data.customer)==null?void 0:S.customer_billing_address),1)]),t("div",kt,[It,t("p",null,":  "+s((k=o.data.customer)==null?void 0:k.customer_shipping_address),1)])]),t("div",Ft,[qt,t("div",Ct,[Pt,t("p",null,":  "+s((I=o.data.customer_pic)==null?void 0:I.contact_name),1)]),t("div",Lt,[Bt,t("p",null,":  "+s((F=o.data.customer_pic)==null?void 0:F.mobile_phone),1)]),t("div",Dt,[zt,t("p",null,":  "+s((q=o.data.customer_pic)==null?void 0:q.email),1)]),t("a",{href:"https://wa.me/"+((C=o.data.customer_pic)==null?void 0:C.mobile_phone),target:"_blank",class:"bg-green-600 flex justify-center rounded-full items-center text-white py-2"},"open whatsapp",8,Tt)]),t("div",Qt,[jt,t("div",At,[o.data.status==1?(i(),n("h1",Nt,"On Submission")):o.data.status==0?(i(),n("h1",Vt,"Rejected")):o.data.status==2?(i(),n("h1",Mt," Approved ")):R("",!0)])])])]),t("div",Ot,[t("div",Rt,[t("div",null,[m(b,{type:"secondary",class:"w-fit h-fit",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:c(()=>[_(" Download Quotation ")]),_:1},8,["onClick"])])]),t("div",Et,[t("div",Gt,[Ut,t("table",Ht,[Jt,t("tbody",null,[(i(!0),n(G,null,E(o.data.quotation_items,(r,N)=>{var P,L;return i(),n("tr",{class:"bg-white border-b",key:N},[t("td",Kt,[t("h1",Wt,s((P=r.product)==null?void 0:P.product_number),1),t("h1",Xt,s((L=r.product)==null?void 0:L.product_description),1)]),t("td",Yt,s(r.quantity+" "+r.uom),1),t("td",Zt,s(p.formatCurrency(r==null?void 0:r.unit_price)),1),t("td",$t,s(p.formatCurrency(r==null?void 0:r.total_price)),1)])}),128)),t("tr",te,[ee,t("td",oe,s(p.formatCurrency(o.data.grand_total)),1)]),t("tr",se,[ae,t("td",le,s(p.formatCurrency(o.data.grand_total*o.data.ppn/100)),1)]),t("tr",ie,[re,t("td",ce,s(p.formatCurrency(o.data.grand_total*o.data.ppn/100+o.data.grand_total)),1)])])])])])])]}),_:1}))}const Le=O(nt,[["render",ne],["__scopeId","data-v-ac2ffd7c"]]);export{Le as default};
