import{D as k}from"./Default-8989BuUh.js";import{_ as S}from"./Icon-iMiFcnKi.js";import{_ as D,c as f,w as p,r as s,o as _,b as i,a as d,j as w}from"./index-UcG7K48i.js";import{u as v}from"./projects-2l0j8OGw.js";import{u as O}from"./quotations-AYfDlbZs.js";import{u as P}from"./purchase-orders-mpnYdY7e.js";import{u as T}from"./profits-Miwnrn2I.js";import{u as x}from"./sales-orders-3gRM1tjw.js";import{I}from"./InputField-hT0RIayt.js";import{M as L}from"./MenuCard-fRYaFdrq.js";import{B as C}from"./ButtonLink-RoDL6GYn.js";import{B}from"./Button-FXweG6b0.js";import{L as M}from"./Loading-I60fnMB4.js";import{s as V}from"./default.css_vue_type_style_index_0_src_true_lang-Hev4rVM_.js";import{D as $}from"./DataTable-AMI-jNCU.js";import{M as j}from"./Modal-qZ73HCU_.js";import{T as A}from"./TextArea-e4RlF1I6.js";import{T as N}from"./TextCurrency-cDeW--3a.js";import{S as F}from"./Stepper-nVdArXdJ.js";import"./Pagination-ht6DyZgL.js";v();O();const m=P(),u=T();x();const R={components:{TextCurrency:N,Default:k,Icon:S,MenuCard:L,ButtonLink:C,Button:B,Loading:M,InputField:I,DataTable:$,Modal:j,Multiselect:V,TextArea:A,Stepper:F},data(){return{body:[],label_head:[],aprove:!1,stepper_menu:[{label:"QT",complete:!0,link:""},{label:"PL",complete:!0,link:""},{label:"SO",complete:!1,link:""},{label:"PO",complete:!1,link:""},{label:"RG",complete:!1,link:""},{label:"DO",complete:!1,link:""},{label:"INV",complete:!1,link:""}],file1:null,file2:null,dataPO:{},loading:!1}},methods:{toDetail(t,e){this.$router.push("/purchase-order/detail/"+m.data_po[t].po_id)},formatDateTime(t){const e=new Date(t),r=e.getDate().toString().padStart(2,"0"),a=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear().toString().slice(-2),n=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0"),c=e.getSeconds().toString().padStart(2,"0");return`${r}/${a}/${o} ${n}:${l}:${c}`},formatCurrency(t){return t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t):"Rp.0"},handleFileChange1(t){this.file1=t.target.files[0]},handleFileChange2(t){this.file2=t.target.files[0]},async checkPL(){await u.getData(this.$route.params.id),u.data_profit.status!==1&&(this.aprove=!0,this.stepper_menu[2].complete=!0,this.stepper_menu[3].complete=!0,this.stepper_menu[2].link="/sales-order/detail/"+u.data_profit.pl_id)},async filterDataforTable(){const t=["createdAt","updatedAt","history","vendor_id","quotation_id","vendor_pic_name","vendor_pic_email","vendor_pic_id","inv_vendor_attachment","so_id","project_id","receive_type","po_id"],e=await m.data_po.map(r=>Object.fromEntries(Object.entries(r).filter(([o])=>!t.includes(o))));for(let r in e)e[r].total=this.formatCurrency(e[r].total);return e},reorderedArray(t){let e=["po_number","project_name","customer_po_number","vendor_name","so_number","total","ppn","po_status"];return t.map(r=>{const a={};for(const o of e)r.hasOwnProperty(o)&&(a[o]=r[o]);return a})}},async created(){this.loading=!0,await this.checkPL(),await m.getData(this.$route.params.id),this.dataPO.quotation_id=this.$route.params.id,this.body=await this.filterDataforTable(),this.body=await this.reorderedArray(this.body),this.body.forEach(t=>{let e=Object.keys(t);this.label_head=e}),this.loading=!1,console.log(this.dataPO)}},q={class:"flex gap-5"},E={class:"px-20 py-10 w-full flex justify-center items-center"},Q={class:"w-full px-10 py-10 bg-white"};function z(t,e,r,a,o,n){const l=s("Loading"),c=s("ButtonLink"),h=s("MenuCard"),y=s("Stepper"),b=s("DataTable"),g=s("Default");return o.loading?(_(),f(l,{key:0})):(_(),f(g,{key:1},{default:p(()=>[i(h,{menuLabel:"Purchase Order"},{default:p(()=>[d("div",q,[i(c,{type:"secondary",size:"small",to:"/receive-list/"+o.dataPO.quotation_id},{default:p(()=>[w(" Next")]),_:1},8,["to"])])]),_:1}),d("div",E,[i(y,{menu:o.stepper_menu},null,8,["menu"])]),d("div",Q,[i(b,{theads:o.label_head,items:o.body,btnView:!0,onView:n.toDetail},null,8,["theads","items","onView"])])]),_:1}))}const de=D(R,[["render",z],["__scopeId","data-v-ed988c28"]]);export{de as default};
