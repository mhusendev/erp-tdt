import{D as j}from"./Default-qlqlDK0L.js";import{_ as T}from"./Icon-2n2d9mqB.js";import{_ as D,c as L,w as r,r as _,o as d,b as p,a as t,j as u,d as k,t as s,l as M,F as O,p as B,k as I}from"./index-YS2kazAn.js";import{u as F}from"./projects-q85NjqVL.js";import{u as Q}from"./products-oOcedfD8.js";import{u as V}from"./brands-g6KXvVCA.js";import{u as G}from"./quotations-GGih03Dz.js";import{u as N}from"./progress-2lQ-tghw.js";import{u as U}from"./vendors-HV6LHoX-.js";import{u as z}from"./profits-8rd6J6Cv.js";import{I as A}from"./InputField-inxCe4wh.js";import{M as R}from"./MenuCard-Yc_fpzsA.js";import{B as q}from"./ButtonLink-F-oapiyF.js";import{B as H}from"./Button-sqPc1nzK.js";import{L as J}from"./Loading-X19ktdnh.js";import{s as E}from"./default.css_vue_type_style_index_0_src_true_lang-ex5BB7O5.js";import{D as Y}from"./DataTable-cG1mwlIC.js";import{M as K}from"./Modal-ZjWr7JwA.js";import{T as W}from"./TextArea-okWg85Ty.js";import{T as X}from"./TextCurrency-fdi7E9V4.js";import{S as Z}from"./Stepper-WkThplD3.js";import"./Pagination-eYLTHK5w.js";F();Q();V();G();U();const m=z(),C=N(),$={components:{TextCurrency:X,Default:j,Icon:T,MenuCard:R,ButtonLink:q,Button:H,Loading:J,InputField:A,DataTable:Y,Modal:K,Multiselect:E,TextArea:W,Stepper:Z},data(){return{aprove:!1,stepper_menu:[{label:"QT",complete:!1,link:"/quotation/detail/"},{label:"PL",complete:!1,link:"/profit-and-loss/detail/"},{label:"SO",complete:!1,link:"/sales-order/detail/"},{label:"PO",complete:!1,link:"/purchase-order/"},{label:"RG",complete:!1,link:"/receive-list/"},{label:"DO",complete:!1,link:"/delivery-order/"},{label:"IV",complete:!1,link:"/invoice/so/"}],file1:null,file2:null,dataPL:{},loading:!1}},methods:{async ApprovePL(){await m.approvePL(this.dataPL.pl_id),await this.updateStepper(),this.this.setStepper()},async updateStepper(){var c;await C.getData(this.$route.params.id);let e=await C.data_progress;e&&(c=e[1])!=null&&c.status&&(this.isPLexist=!0),await localStorage.setItem("progress",JSON.stringify(e))},async setStepper(){var c,P,b,o,i,x,g,n,y,w,v,h,f,l;let e=await JSON.parse(localStorage.getItem("progress"));e&&(this.stepper_menu[0].complete=(c=e[0])==null?void 0:c.status,this.stepper_menu[0].link=this.stepper_menu[0].link+((P=e[0])==null?void 0:P.idQT),this.stepper_menu[1].complete=(b=e[1])==null?void 0:b.status,this.stepper_menu[1].link=this.stepper_menu[1].link+((o=e[1])==null?void 0:o.idQT),this.stepper_menu[2].complete=(i=e[2])==null?void 0:i.status,this.stepper_menu[2].link=this.stepper_menu[2].link+((x=e[2])==null?void 0:x.idPL),this.stepper_menu[3].complete=(g=e[3])==null?void 0:g.status,this.stepper_menu[3].link=this.stepper_menu[3].link+((n=e[3])==null?void 0:n.idQT),this.stepper_menu[4].complete=(y=e[4])==null?void 0:y.status,this.stepper_menu[4].link=this.stepper_menu[4].link+((w=e[4])==null?void 0:w.idQT),this.stepper_menu[5].complete=(v=e[5])==null?void 0:v.status,this.stepper_menu[5].link=this.stepper_menu[5].link+((h=e[5])==null?void 0:h.idSO),this.stepper_menu[6].complete=(f=e[6])==null?void 0:f.status,this.stepper_menu[6].link=this.stepper_menu[6].link+((l=e[6])==null?void 0:l.idSO))},formatCurrency(e){return e?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e):"Rp.0"},handleFileChange1(e){this.file1=e.target.files[0]},handleFileChange2(e){this.file2=e.target.files[0]},upload1(){const e=new FormData;e.append("file",this.file1),m.UploadCustPO(this.$route.params.id,e)},upload2(){const e=new FormData;e.append("file",this.file2),m.UploadVendQT(this.$route.params.id,e)}},async created(){this.loading=!0,await this.setStepper(),await m.getData(this.$route.params.id),this.dataPL=await m.data_profit,this.dataPL.status!==1&&(this.aprove=!0),this.loading=!1,console.log(this.dataPL)}},a=e=>(B("data-v-3d14a837"),e=e(),I(),e),tt={class:"flex gap-5"},et={key:1,class:"flex gap-3"},st={class:"px-20 py-10 w-full flex justify-center items-center"},ot={class:"w-full px-10 py-10 bg-white rounded-xl mt-5"},at={class:"w-full flex justify-between"},it={class:"w-full"},lt={class:"font-bold text-lg"},ct=a(()=>t("b",null,"Quotation Status #:",-1)),nt={class:"flex w-1/2 gap-5 justify-center items-center"},rt={class:"w-full mt-10"},_t={class:"relative overflow-x-auto"},dt=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 font-semibold"}," Profit & Loss Items ",-1)),pt={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},ut=a(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Vendor "),t("th",{scope:"col",class:"px-6 py-3"}," product "),t("th",{scope:"col",class:"px-6 py-3"}," QTY "),t("th",{scope:"col",class:"px-6 py-3"}," COGS Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Total COGS Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Selling Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Total Selling Unit Price ")])],-1)),ht={class:"px-6 py-4 text-xs"},ft={class:"mb-2"},mt={class:""},xt={class:"px-6 py-4 text-xs grid grid-rows-3 gap-2"},gt={class:""},yt={class:""},wt={class:"px-6 py-4"},vt={class:"px-6 py-4 text-right"},Pt={class:"px-6 py-4 text-right"},bt={class:"px-6 py-4 text-right"},Lt={class:"px-6 py-4 text-right"},kt={class:"grid grid-cols-3 gap-2 border-b pb-2"},Ct={class:"w-full"},St=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Hardware ",-1)),jt={class:"w-full px-5"},Tt={class:"w-full flex justify-start text-gray-500"},Dt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Mt=a(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),Ot={class:"w-1/2 text-end"},Bt={class:"w-full flex justify-start text-gray-500"},It={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ft=a(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),Qt={class:"w-1/2 text-end"},Vt={class:"w-full flex justify-start text-gray-500"},Gt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Nt=a(()=>t("h1",{class:"w-1/2"},"Margin",-1)),Ut={class:"w-1/2 text-end"},zt={class:"w-full flex justify-start text-gray-500"},At={class:"flex justify-between gap-10 mt-5 w-[300px]"},Rt=a(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),qt={class:"w-1/2 text-end"},Ht={class:"w-full"},Jt=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Service ",-1)),Et={class:"w-full px-5"},Yt={class:"w-full flex justify-start text-gray-500"},Kt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Wt=a(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),Xt={class:"w-1/2 text-end"},Zt={class:"w-full flex justify-start text-gray-500"},$t={class:"flex justify-between gap-10 mt-5 w-[300px]"},te=a(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),ee={class:"w-1/2 text-end"},se={class:"w-full flex justify-start text-gray-500"},oe={class:"flex justify-between gap-10 mt-5 w-[300px]"},ae=a(()=>t("h1",{class:"w-1/2"},"Margin",-1)),ie={class:"w-1/2 text-end"},le={class:"w-full flex justify-start text-gray-500"},ce={class:"flex justify-between gap-10 mt-5 w-[300px]"},ne=a(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),re={class:"w-1/2 text-end"},_e={class:"w-full"},de=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Maintenance ",-1)),pe={class:"w-full px-5"},ue={class:"w-full flex justify-start text-gray-500"},he={class:"flex justify-between gap-10 mt-5 w-[300px]"},fe=a(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),me={class:"w-1/2 text-end"},xe={class:"w-full flex justify-start text-gray-500"},ge={class:"flex justify-between gap-10 mt-5 w-[300px]"},ye=a(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),we={class:"w-1/2 text-end"},ve={class:"w-full flex justify-start text-gray-500"},Pe={class:"flex justify-between gap-10 mt-5 w-[300px]"},be=a(()=>t("h1",{class:"w-1/2"},"Margin",-1)),Le={class:"w-1/2 text-end"},ke={class:"w-full flex justify-start text-gray-500"},Ce={class:"flex justify-between gap-10 mt-5 w-[300px]"},Se=a(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),je={class:"w-1/2 text-end"},Te=a(()=>t("div",{class:"w-full flex justify-end"},[t("div",{class:"bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold text-right"}," Total Price Hardware, Services & Maintenance ")],-1)),De={class:"flex justify-end"},Me={class:"px-5"},Oe={class:"w-full flex justify-start text-gray-500"},Be={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ie=a(()=>t("h1",{class:"w-1/2"},"Total COGS",-1)),Fe={class:"w-1/2 text-end"},Qe={class:"w-full flex justify-start text-gray-500"},Ve={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ge=a(()=>t("h1",{class:"w-1/2"},"Total Selling",-1)),Ne={class:"w-1/2 text-end"},Ue={class:"w-full flex justify-start text-gray-500"},ze={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ae=a(()=>t("h1",{class:"w-1/2"},"Total Margin",-1)),Re={class:"w-1/2 text-end"},qe={class:"w-full flex justify-start text-gray-500"},He={class:"flex justify-between gap-10 mt-5 w-[300px]"},Je=a(()=>t("h1",{class:"w-1/2"},"Total Percentage",-1)),Ee={class:"w-1/2 text-end"};function Ye(e,c,P,b,o,i){const x=_("Loading"),g=_("ButtonLink"),n=_("Button"),y=_("MenuCard"),w=_("Stepper"),v=_("Default");return o.loading?(d(),L(x,{key:0})):(d(),L(v,{key:1},{default:r(()=>{var h,f;return[p(y,{menuLabel:"Profit & Loss"},{default:r(()=>[t("div",tt,[o.aprove?(d(),L(g,{key:0,type:"secondary",size:"small",to:"/sales-order/detail/"+o.dataPL.pl_id},{default:r(()=>[u(" Next")]),_:1},8,["to"])):(d(),k("div",et,[p(n,{type:"success",onClick:i.ApprovePL,icon_position:"left",size:"small",icon_name:"Check"},{default:r(()=>[u(" Approve ")]),_:1},8,["onClick"]),p(n,{type:"danger",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Ban"},{default:r(()=>[u(" Reject ")]),_:1},8,["onClick"])]))])]),_:1}),t("div",st,[p(w,{menu:o.stepper_menu},null,8,["menu"])]),t("div",ot,[t("div",at,[t("div",it,[t("h1",lt,s((h=o.dataPL.customer)==null?void 0:h.customer_name),1),t("h1",null,s((f=o.dataPL.customer)==null?void 0:f.customer_building),1),t("h1",null,[ct,u(" "+s(o.dataPL.quotation.status),1)])]),t("div",nt,[p(n,{type:"secondary",class:"w-fit h-fit",c:"",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:r(()=>[u(" Customer PO ")]),_:1},8,["onClick"]),p(n,{type:"secondary",class:"w-fit h-fit",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:r(()=>[u(" Vendor QT ")]),_:1},8,["onClick"])])]),t("div",rt,[t("div",_t,[dt,t("table",pt,[ut,t("tbody",null,[(d(!0),k(O,null,M(o.dataPL.profit_and_loss_item,(l,S)=>(d(),k("tr",{class:"bg-white border-b",key:S},[t("td",ht,[t("h1",ft,s(l.vendor.vendor_name),1),t("h1",mt,s(l.vendor_pic.title+l.vendor_pic.contact_name),1)]),t("td",xt,[t("h1",gt,s(l.product.product_number),1),t("h1",yt,s(l.product.product_description),1)]),t("td",wt,s(l.quantity+" "+l.uom),1),t("td",vt,s(i.formatCurrency(l.unit_cogs_price)),1),t("td",Pt,s(i.formatCurrency(l.total_cogs_price)),1),t("td",bt,s(i.formatCurrency(l.unit_selling_price)),1),t("td",Lt,s(i.formatCurrency(l.total_selling_price)),1)]))),128))])]),t("div",kt,[t("div",Ct,[St,t("div",jt,[t("div",Tt,[t("div",Dt,[Mt,t("h1",Ot,s(i.formatCurrency(o.dataPL.cogs_price_hardware)),1)])]),t("div",Bt,[t("div",It,[Ft,t("h1",Qt,s(i.formatCurrency(o.dataPL.selling_price_hardware)),1)])]),t("div",Vt,[t("div",Gt,[Nt,t("h1",Ut,s(i.formatCurrency(o.dataPL.margin_hardware)),1)])]),t("div",zt,[t("div",At,[Rt,t("h1",qt,s(Math.ceil(o.dataPL.percentage_hardware))+"%",1)])])])]),t("div",Ht,[Jt,t("div",Et,[t("div",Yt,[t("div",Kt,[Wt,t("h1",Xt,s(i.formatCurrency(o.dataPL.cogs_price_service)),1)])]),t("div",Zt,[t("div",$t,[te,t("h1",ee,s(i.formatCurrency(o.dataPL.selling_price_service)),1)])]),t("div",se,[t("div",oe,[ae,t("h1",ie,s(i.formatCurrency(o.dataPL.margin_service)),1)])]),t("div",le,[t("div",ce,[ne,t("h1",re,s(Math.ceil(o.dataPL.percentage_service))+"%",1)])])])]),t("div",_e,[de,t("div",pe,[t("div",ue,[t("div",he,[fe,t("h1",me,s(i.formatCurrency(o.dataPL.cogs_price_maintenance)),1)])]),t("div",xe,[t("div",ge,[ye,t("h1",we,s(i.formatCurrency(o.dataPL.selling_price_maintenance)),1)])]),t("div",ve,[t("div",Pe,[be,t("h1",Le,s(i.formatCurrency(o.dataPL.margin_maintenance)),1)])]),t("div",ke,[t("div",Ce,[Se,t("h1",je,s(Math.ceil(o.dataPL.percentage_maintenance))+"%",1)])])])])]),Te,t("div",De,[t("div",Me,[t("div",Oe,[t("div",Be,[Ie,t("h1",Fe,s(i.formatCurrency(o.dataPL.total_cogs)),1)])]),t("div",Qe,[t("div",Ve,[Ge,t("h1",Ne,s(i.formatCurrency(o.dataPL.total_selling)),1)])]),t("div",Ue,[t("div",ze,[Ae,t("h1",Re,s(i.formatCurrency(o.dataPL.total_margin)),1)])]),t("div",qe,[t("div",He,[Je,t("h1",Ee,s(Math.ceil(o.dataPL.total_percentage))+"%",1)])])])])])])])]}),_:1}))}const xs=D($,[["render",Ye],["__scopeId","data-v-3d14a837"]]);export{xs as default};
