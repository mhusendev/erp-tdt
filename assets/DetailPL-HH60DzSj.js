import{D as C}from"./Default-vLo-ryjW.js";import{_ as j}from"./Icon-gQmAwROU.js";import{_ as S,c as h,w as i,r as n,o as r,b as _,a as t,j as d,d as u,t as s,l as k,F as D,p as M,k as T}from"./index-ZXAHIXJB.js";import{u as B}from"./projects-Q1HwCUmv.js";import{u as I}from"./products-VY_ed68S.js";import{u as F}from"./brands-9VSxmgBx.js";import{u as O}from"./quotations-45aZL0RE.js";import{u as V}from"./vendors-cSUi9ECP.js";import{u as G}from"./profits-5ioKMry-.js";import{I as N}from"./InputField-dPOzz2n0.js";import{M as Q}from"./MenuCard-PiKD37ig.js";import{B as U}from"./ButtonLink-d1sIslZn.js";import{B as z}from"./Button-L62cJvwW.js";import{L as A}from"./Loading-_KMABdLz.js";import{s as R}from"./default.css_vue_type_style_index_0_src_true_lang-z7wFf1h1.js";import{D as q}from"./DataTable-Tl8Fs48C.js";import{M as H}from"./Modal-DPgTFCMj.js";import{T as E}from"./TextArea-ksnhi9rg.js";import{T as Y}from"./TextCurrency-QJtIun8F.js";import{S as J}from"./Stepper-07h0EuT2.js";import"./Pagination-kq5k-6sy.js";B();I();F();O();V();const f=G(),K={components:{TextCurrency:Y,Default:C,Icon:j,MenuCard:Q,ButtonLink:U,Button:z,Loading:A,InputField:N,DataTable:q,Modal:H,Multiselect:R,TextArea:E,Stepper:J},data(){return{aprove:!1,stepper_menu:[{label:"QT",complete:!0,link:""},{label:"PL",complete:!0,link:""},{label:"SO",complete:!1,link:""},{label:"PO",complete:!1,link:""},{label:"RG",complete:!1,link:""},{label:"DO",complete:!1,link:""},{label:"INV",complete:!1,link:""}],file1:null,file2:null,dataPL:{},loading:!1}},methods:{async ApprovePL(){await f.approvePL(this.dataPL.pl_id)},formatCurrency(a){return a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a):"Rp.0"},handleFileChange1(a){this.file1=a.target.files[0]},handleFileChange2(a){this.file2=a.target.files[0]},upload1(){const a=new FormData;a.append("file",this.file1),f.UploadCustPO(this.$route.params.id,a)},upload2(){const a=new FormData;a.append("file",this.file2),f.UploadVendQT(this.$route.params.id,a)}},async created(){this.loading=!0,await f.getData(this.$route.params.id),this.dataPL=await f.data_profit,this.dataPL.status!==1&&(this.aprove=!0,this.stepper_menu[2].complete=!0,this.stepper_menu[2].link="/sales-order/detail/"+this.dataPL.pl_id),this.loading=!1,console.log(this.dataPL)}},o=a=>(M("data-v-0b43cf9e"),a=a(),T(),a),W={class:"flex gap-5"},X={key:1,class:"flex gap-3"},Z={class:"px-20 py-10 w-full flex justify-center items-center"},$={class:"w-full px-10 py-10 bg-white rounded-xl mt-5"},tt={class:"w-full flex justify-between"},st={class:"w-full"},et={class:"font-bold text-lg"},ot=o(()=>t("b",null,"Quotation Status #:",-1)),at={class:"flex w-1/2 gap-5 justify-center items-center"},lt={class:"w-full mt-10"},ct={class:"relative overflow-x-auto"},it=o(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 font-semibold"}," Profit & Loss Items ",-1)),nt={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},rt=o(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Vendor "),t("th",{scope:"col",class:"px-6 py-3"}," product "),t("th",{scope:"col",class:"px-6 py-3"}," QTY "),t("th",{scope:"col",class:"px-6 py-3"}," COGS Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Total COGS Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Selling Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Total Selling Unit Price ")])],-1)),_t={class:"px-6 py-4 text-xs"},dt={class:"mb-2"},ft={class:""},pt={class:"px-6 py-4 text-xs grid grid-rows-3 gap-2"},ht={class:""},ut={class:""},mt={class:"px-6 py-4"},xt={class:"px-6 py-4 text-right"},yt={class:"px-6 py-4 text-right"},wt={class:"px-6 py-4 text-right"},gt={class:"px-6 py-4 text-right"},vt={class:"grid grid-cols-3 gap-2 border-b pb-2"},bt={class:"w-full"},Pt=o(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Hardware ",-1)),Lt={class:"w-full px-5"},Ct={class:"w-full flex justify-start text-gray-500"},jt={class:"flex justify-between gap-10 mt-5 w-[300px]"},St=o(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),kt={class:"w-1/2 text-end"},Dt={class:"w-full flex justify-start text-gray-500"},Mt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Tt=o(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),Bt={class:"w-1/2 text-end"},It={class:"w-full flex justify-start text-gray-500"},Ft={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ot=o(()=>t("h1",{class:"w-1/2"},"Margin",-1)),Vt={class:"w-1/2 text-end"},Gt={class:"w-full flex justify-start text-gray-500"},Nt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Qt=o(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),Ut={class:"w-1/2 text-end"},zt={class:"w-full"},At=o(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Service ",-1)),Rt={class:"w-full px-5"},qt={class:"w-full flex justify-start text-gray-500"},Ht={class:"flex justify-between gap-10 mt-5 w-[300px]"},Et=o(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),Yt={class:"w-1/2 text-end"},Jt={class:"w-full flex justify-start text-gray-500"},Kt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Wt=o(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),Xt={class:"w-1/2 text-end"},Zt={class:"w-full flex justify-start text-gray-500"},$t={class:"flex justify-between gap-10 mt-5 w-[300px]"},ts=o(()=>t("h1",{class:"w-1/2"},"Margin",-1)),ss={class:"w-1/2 text-end"},es={class:"w-full flex justify-start text-gray-500"},os={class:"flex justify-between gap-10 mt-5 w-[300px]"},as=o(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),ls={class:"w-1/2 text-end"},cs={class:"w-full"},is=o(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Maintenance ",-1)),ns={class:"w-full px-5"},rs={class:"w-full flex justify-start text-gray-500"},_s={class:"flex justify-between gap-10 mt-5 w-[300px]"},ds=o(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),fs={class:"w-1/2 text-end"},ps={class:"w-full flex justify-start text-gray-500"},hs={class:"flex justify-between gap-10 mt-5 w-[300px]"},us=o(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),ms={class:"w-1/2 text-end"},xs={class:"w-full flex justify-start text-gray-500"},ys={class:"flex justify-between gap-10 mt-5 w-[300px]"},ws=o(()=>t("h1",{class:"w-1/2"},"Margin",-1)),gs={class:"w-1/2 text-end"},vs={class:"w-full flex justify-start text-gray-500"},bs={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ps=o(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),Ls={class:"w-1/2 text-end"},Cs=o(()=>t("div",{class:"w-full flex justify-end"},[t("div",{class:"bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold text-right"}," Total Price Hardware, Services & Maintenance ")],-1)),js={class:"flex justify-end"},Ss={class:"px-5"},ks={class:"w-full flex justify-start text-gray-500"},Ds={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ms=o(()=>t("h1",{class:"w-1/2"},"Total COGS",-1)),Ts={class:"w-1/2 text-end"},Bs={class:"w-full flex justify-start text-gray-500"},Is={class:"flex justify-between gap-10 mt-5 w-[300px]"},Fs=o(()=>t("h1",{class:"w-1/2"},"Total Selling",-1)),Os={class:"w-1/2 text-end"},Vs={class:"w-full flex justify-start text-gray-500"},Gs={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ns=o(()=>t("h1",{class:"w-1/2"},"Total Margin",-1)),Qs={class:"w-1/2 text-end"},Us={class:"w-full flex justify-start text-gray-500"},zs={class:"flex justify-between gap-10 mt-5 w-[300px]"},As=o(()=>t("h1",{class:"w-1/2"},"Total Percentage",-1)),Rs={class:"w-1/2 text-end"};function qs(a,y,Hs,Es,e,l){const w=n("Loading"),g=n("ButtonLink"),p=n("Button"),v=n("MenuCard"),b=n("Stepper"),P=n("Default");return e.loading?(r(),h(w,{key:0})):(r(),h(P,{key:1},{default:i(()=>{var m,x;return[_(v,{menuLabel:"Profit & Loss"},{default:i(()=>[t("div",W,[e.aprove?(r(),h(g,{key:0,type:"secondary",size:"small",to:"/sales-order/detail/"+e.dataPL.pl_id},{default:i(()=>[d(" Next")]),_:1},8,["to"])):(r(),u("div",X,[_(p,{type:"success",onClick:l.ApprovePL,icon_position:"left",size:"small",icon_name:"Check"},{default:i(()=>[d(" Approve ")]),_:1},8,["onClick"]),_(p,{type:"danger",onClick:a.submitForm,icon_position:"left",size:"small",icon_name:"Ban"},{default:i(()=>[d(" Reject ")]),_:1},8,["onClick"])]))])]),_:1}),t("div",Z,[_(b,{menu:e.stepper_menu},null,8,["menu"])]),t("div",$,[t("div",tt,[t("div",st,[t("h1",et,s((m=e.dataPL.customer)==null?void 0:m.customer_name),1),t("h1",null,s((x=e.dataPL.customer)==null?void 0:x.customer_building),1),t("h1",null,[ot,d(" "+s(e.dataPL.quotation.status),1)])]),t("div",at,[_(p,{type:"secondary",class:"w-fit h-fit",c:"",onClick:a.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:i(()=>[d(" Customer PO ")]),_:1},8,["onClick"]),_(p,{type:"secondary",class:"w-fit h-fit",onClick:a.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:i(()=>[d(" Vendor QT ")]),_:1},8,["onClick"])])]),t("div",lt,[t("div",ct,[it,t("table",nt,[rt,t("tbody",null,[(r(!0),u(D,null,k(e.dataPL.profit_and_loss_item,(c,L)=>(r(),u("tr",{class:"bg-white border-b",key:L},[t("td",_t,[t("h1",dt,s(c.vendor.vendor_name),1),t("h1",ft,s(c.vendor_pic.title+c.vendor_pic.contact_name),1)]),t("td",pt,[t("h1",ht,s(c.product.product_number),1),t("h1",ut,s(c.product.product_description),1)]),t("td",mt,s(c.quantity+" "+c.uom),1),t("td",xt,s(l.formatCurrency(c.unit_cogs_price)),1),t("td",yt,s(l.formatCurrency(c.total_cogs_price)),1),t("td",wt,s(l.formatCurrency(c.unit_selling_price)),1),t("td",gt,s(l.formatCurrency(c.total_selling_price)),1)]))),128))])]),t("div",vt,[t("div",bt,[Pt,t("div",Lt,[t("div",Ct,[t("div",jt,[St,t("h1",kt,s(l.formatCurrency(e.dataPL.cogs_price_hardware)),1)])]),t("div",Dt,[t("div",Mt,[Tt,t("h1",Bt,s(l.formatCurrency(e.dataPL.selling_price_hardware)),1)])]),t("div",It,[t("div",Ft,[Ot,t("h1",Vt,s(l.formatCurrency(e.dataPL.margin_hardware)),1)])]),t("div",Gt,[t("div",Nt,[Qt,t("h1",Ut,s(Math.ceil(e.dataPL.percentage_hardware))+"%",1)])])])]),t("div",zt,[At,t("div",Rt,[t("div",qt,[t("div",Ht,[Et,t("h1",Yt,s(l.formatCurrency(e.dataPL.cogs_price_service)),1)])]),t("div",Jt,[t("div",Kt,[Wt,t("h1",Xt,s(l.formatCurrency(e.dataPL.selling_price_service)),1)])]),t("div",Zt,[t("div",$t,[ts,t("h1",ss,s(l.formatCurrency(e.dataPL.margin_service)),1)])]),t("div",es,[t("div",os,[as,t("h1",ls,s(Math.ceil(e.dataPL.percentage_service))+"%",1)])])])]),t("div",cs,[is,t("div",ns,[t("div",rs,[t("div",_s,[ds,t("h1",fs,s(l.formatCurrency(e.dataPL.cogs_price_maintenance)),1)])]),t("div",ps,[t("div",hs,[us,t("h1",ms,s(l.formatCurrency(e.dataPL.selling_price_maintenance)),1)])]),t("div",xs,[t("div",ys,[ws,t("h1",gs,s(l.formatCurrency(e.dataPL.margin_maintenance)),1)])]),t("div",vs,[t("div",bs,[Ps,t("h1",Ls,s(Math.ceil(e.dataPL.percentage_maintenance))+"%",1)])])])])]),Cs,t("div",js,[t("div",Ss,[t("div",ks,[t("div",Ds,[Ms,t("h1",Ts,s(l.formatCurrency(e.dataPL.total_cogs)),1)])]),t("div",Bs,[t("div",Is,[Fs,t("h1",Os,s(l.formatCurrency(e.dataPL.total_selling)),1)])]),t("div",Vs,[t("div",Gs,[Ns,t("h1",Qs,s(l.formatCurrency(e.dataPL.total_margin)),1)])]),t("div",Us,[t("div",zs,[As,t("h1",Rs,s(Math.ceil(e.dataPL.total_percentage))+"%",1)])])])])])])])]}),_:1}))}const he=S(K,[["render",qs],["__scopeId","data-v-0b43cf9e"]]);export{he as default};
