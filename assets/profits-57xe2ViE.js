import{u as p,x as l,m as c,y as o,S as a}from"./index-H1euUr_g.js";var f={VITE_API_BASE_URL:"https://auth-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_BASE_URL2:"https://backend-dani-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_AUTH_URL:"https://backend-keycloak-erp-tdt.cws.co.id/keycloak/api",VITE_API_PDF:"https://report-erp-tdt.cws.co.id/erp-tdt/api",VITE_APP_MODE:"dev",VITE_APP_:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const s=p(),n=f,r={getByQuotation:"/profit-and-loss?quotation_id=",post:"/profit-and-loss",search:"/profit-and-loss?search=",getbyid:"/profit-and-loss?pl_id=",put:"/profit-and-loss/",uploadCustPO:"/profit-and-loss/upload-cust-po/",uploadVendQT:"/profit-and-loss/upload-vendor-quotation/",approvePl:"/profit-and-loss/approve/"},i={headers:{Authorization:`Bearer ${s.access_token}`}},g=l({id:"profit-and-loss",state:()=>c({data_profit:[],loading:!1,headers:[],message:"",dataEdit:{},totalPage:0,currentPage:1,perPage:0,dataSearch:[],itemTemp:[],dataDetail:{}}),getters:{setValuedata(e){this.data_profit=e}},actions:{approvePL(e){o.put(n.VITE_API_BASE_URL+r.approvePl+e,{},i).then(t=>{this.message="Berhasil Approve PL",new a({position:"top-end",html:'<p style="color:#ffff">success save data!</p>',showConfirmButton:!1,background:"green",timer:1500}),window.location.reload()}).catch(t=>{console.error("Error:",t),s.sessionFail(t.response.data.message),this.message="gagal Approve PL",new a({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})},setLoading(e){this.loading=e},async UploadCustPO(e,t){try{(await o.put(n.VITE_API_BASE_URL+r.uploadCustPO+e,t,i)).status!==200&&new a({position:"top-end",html:'<p style="color:#ffff">failed upload file customer po!</p>',background:"red",showConfirmButton:!1,timer:1500}),new a({position:"top-end",html:'<p style="color:#ffff">success upload file customer po!</p>',showConfirmButton:!1,background:"green",timer:1500})}catch(d){s.sessionFail(d.response.data.message),console.log(d)}},async UploadVendQT(e,t){try{(await o.put(n.VITE_API_BASE_URL+r.uploadVendQT+e,t,i)).status!==200&&new a({position:"top-end",html:'<p style="color:#ffff">failed upload file vendor QT!</p>',background:"red",showConfirmButton:!1,timer:1500}),new a({position:"top-end",html:'<p style="color:#ffff">success upload file vendor QT!</p>',showConfirmButton:!1,background:"green",timer:1500})}catch(d){s.sessionFail(d.response.data.message),console.log(d)}},async getIdPL(e){try{return await(await o.get(n.VITE_API_BASE_URL+r.getByQuotation+e,i)).data.data.pl_id}catch(t){s.sessionFail(t.response.data.message),console.log(t)}},async getData(e){try{this.setLoading(!0);const t=await o.get(n.VITE_API_BASE_URL+r.getByQuotation+e,i);this.data_profit=t.data.data}catch(t){s.sessionFail(t.response.data.message),console.log(t)}finally{this.setLoading(!1)}},async getById(e){try{const t=await o.get(n.VITE_API_BASE_URL+r.getbyid+e,i);this.dataDetail=t.data.data,console.log(t.data.data)}catch(t){s.sessionFail(t.response.data.message),console.log(t)}},async PostData(e){console.log(JSON.stringify(e)),o.post(n.VITE_API_BASE_URL+r.post,e,i).then(t=>{this.message="Berhasil Input Data",new a({position:"top-end",html:'<p style="color:#ffff">success save data!</p>',showConfirmButton:!1,background:"green",timer:1500}),console.log(t.data),window.location.href="/profit-and-loss/upload/"+t.data.data.pl_id}).catch(t=>{console.error("Error:",t),s.sessionFail(t.response.data.message),this.message="gagal Input Data",new a({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})},async Search(e){try{this.setLoading(!0);const t=await o.get(n.VITE_API_BASE_URL+r.search+e,i);return this.dataSearch=t.data.data,t.data.data}catch(t){s.sessionFail(t.response.data.message),console.log(t)}finally{this.setLoading(!1)}},PutData(e){o.put(n.VITE_API_BASE_URL+r.put+e.brand_id,e,i).then(t=>{this.message="Berhasil Input Data",new a({text:"Berhasil",icon:"success"})}).catch(t=>{console.error("Error:",t),s.sessionFail(t.response.data.message),this.message="gagal Input Data",new a({text:"Gagal",icon:"warning"})})}}});export{g as u};
