import{u as d,x as c,m as p,y as t,S as o}from"./index-jErkSH92.js";var g={VITE_API_BASE_URL:"https://auth-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_BASE_URL2:"https://backend-dani-erp-tdt.cws.co.id/erp-tdt/api",VITE_API_AUTH_URL:"https://backend-keycloak-erp-tdt.cws.co.id/keycloak/api",VITE_APP_MODE:"dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const a=d(),n=g,i={getByPO:"/invoice-order/?po_id=",post:"/invoice-order/so/",search:"/invoice-order?search=",getbyid:"/invoice-order/",checkSerial:"/invoice-order/serial/so/",put:"/invoice-order/",listByPO:"/invoice-order/po/",listBySO:"/invoice-order/?so_id=",uploadCustPO:"/invoice-order/upload-cust-po/",uploadVendQT:"/invoice-order/upload-vendor-quotation/",approvePl:"/invoice-order/approve/"},r={headers:{Authorization:`Bearer ${a.access_token}`}},h=c({id:"invoice-order",state:()=>p({data_rg:[],list_rg:[],lisBy_so:[],loading:!1,headers:[],message:"",dataEdit:{},totalPage:0,currentPage:1,perPage:0,dataSearch:[],itemTemp:[],dataSerial:[],dataDetail:{}}),getters:{setValuedata(s){this.data_rg=s}},actions:{async CheckSerial(s){try{this.setLoading(!0);const e=await t.get(n.VITE_API_BASE_URL2+i.checkSerial+s,r);this.dataSerial=e.data.data}catch(e){console.log(e.response.data.message),a.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},approvePL(s){t.put(n.VITE_API_BASE_URL2+i.approvePl+s,{},r).then(e=>{this.message="Berhasil Approve PL",new o({position:"top-end",html:'<p style="color:#ffff">success save data!</p>',showConfirmButton:!1,background:"green",timer:1500})}).catch(e=>{console.error("Error:",e),a.sessionFail(e.response.data.message),this.message="gagal Approve PL",new o({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})},setLoading(s){this.loading=s},async UploadCustPO(s,e){try{(await t.put(n.VITE_API_BASE_URL2+i.uploadCustPO+s,e,r)).status!==200&&new o({position:"top-end",html:'<p style="color:#ffff">failed upload file customer po!</p>',background:"red",showConfirmButton:!1,timer:1500}),new o({position:"top-end",html:'<p style="color:#ffff">success upload file customer po!</p>',showConfirmButton:!1,background:"green",timer:1500})}catch(l){a.sessionFail(l.response.data.message),console.log(l)}},async UploadVendQT(s,e){try{(await t.put(n.VITE_API_BASE_URL2+i.uploadVendQT+s,e,r)).status!==200&&new o({position:"top-end",html:'<p style="color:#ffff">failed upload file vendor QT!</p>',background:"red",showConfirmButton:!1,timer:1500}),new o({position:"top-end",html:'<p style="color:#ffff">success upload file vendor QT!</p>',showConfirmButton:!1,background:"green",timer:1500})}catch(l){a.sessionFail(l.response.data.message),console.log(l)}},async listBySO(s){try{this.setLoading(!0);const e=await t.get(n.VITE_API_BASE_URL2+i.listBySO+s,r);this.lisBy_so=e.data.data,console.log(e.data)}catch(e){console.log(e.response.data.message),a.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},async listByPO(s){try{this.setLoading(!0);const e=await t.get(n.VITE_API_BASE_URL2+i.listByPO+s,r);this.list_rg=e.data.data}catch(e){console.log(e.response.data.message),a.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},async getData(s){try{this.setLoading(!0);const e=await t.get(n.VITE_API_BASE_URL2+i.getByPO+s,r);this.data_rg=e.data.data}catch(e){console.log(e.response.data.message),a.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},async getById(s){try{const e=await t.get(n.VITE_API_BASE_URL2+i.getbyid+s,r);this.dataDetail=e.data.data}catch(e){a.sessionFail(e.response.data.message),console.log(e)}},async PostData(s){console.log(JSON.stringify(s)),t.post(n.VITE_API_BASE_URL2+i.post+s.so_id,s,r).then(e=>{this.message="Invoice Created",new o({position:"top-end",html:'<p style="color:#ffff">Invoice Created</p>',showConfirmButton:!1,background:"green",timer:1500}),window.location.reload()}).catch(e=>{new o({position:"top-end",html:'<p style="color:#ffff">Failed to Create Invoice</p>',background:"red",showConfirmButton:!1,timer:1500}),console.error("Error:",e),a.sessionFail(e.response.data.message),this.message="gagal Input Data",new o({position:"top-end",html:'<p style="color:#ffff">failed save data!</p>',background:"red",showConfirmButton:!1,timer:1500})})},async Search(s){try{this.setLoading(!0);const e=await t.get(n.VITE_API_BASE_URL2+i.search+s,r);return this.dataSearch=e.data.data,e.data.data}catch(e){a.sessionFail(e.response.data.message),console.log(e)}finally{this.setLoading(!1)}},PutData(s){t.put(n.VITE_API_BASE_URL2+i.put+s.brand_id,s,r).then(e=>{this.message="Berhasil Input Data",new o({text:"Berhasil",icon:"success"})}).catch(e=>{console.error("Error:",e),a.sessionFail(e.response.data.message),this.message="gagal Input Data",new o({text:"Gagal",icon:"warning"})})}}});export{h as u};
