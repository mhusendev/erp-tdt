import{D as k}from"./Default-UzTWWqk9.js";import{_ as C}from"./Icon-rtOuHIS6.js";import{_ as j,c as h,w as c,r as n,o as r,b as _,a as t,j as d,d as f,t as s,l as S,F as T,p as D,k as M}from"./index-2Xl9qFv7.js";import{u as B}from"./projects-m_BtDv-_.js";import{u as O}from"./products-KWUgHVH5.js";import{u as I}from"./brands-phqYSftc.js";import{u as F}from"./quotations-DO3D_tSp.js";import{u as Q}from"./vendors-U6wxk0Ns.js";import{u as V}from"./profits-DD-uQzfp.js";import{I as G}from"./InputField-eKlKr605.js";import{M as N}from"./MenuCard-Cm1nNJYU.js";import{B as U}from"./ButtonLink-xY7BTdTe.js";import{B as z}from"./Button-_saYDuqz.js";import{L as A}from"./Loading-bud4hAA4.js";import{s as R}from"./default.css_vue_type_style_index_0_src_true_lang-U16oWYK-.js";import{D as q}from"./DataTable-yeLKldhm.js";import{M as H}from"./Modal-ZMIHFB3R.js";import{T as E}from"./TextArea-KW4ixcr0.js";import{T as J}from"./TextCurrency-fK0DUXJx.js";import{S as Y}from"./Stepper-iYhSeoBN.js";import"./Pagination-9Wn2p13Z.js";B();O();I();F();Q();const p=V(),K={components:{TextCurrency:J,Default:k,Icon:C,MenuCard:N,ButtonLink:U,Button:z,Loading:A,InputField:G,DataTable:q,Modal:H,Multiselect:R,TextArea:E,Stepper:Y},data(){return{aprove:!1,stepper_menu:[{label:"QT",complete:!1,link:"/quotation/detail/"},{label:"PL",complete:!1,link:"/profit-and-loss/detail/"},{label:"SO",complete:!1,link:"/sales-order/detail/"},{label:"PO",complete:!1,link:"/purchase-order/"},{label:"RG",complete:!1,link:"/receive-list/"},{label:"DO",complete:!1,link:"/delivery-order/"},{label:"IV",complete:!1,link:"/invoice/so/"}],file1:null,file2:null,dataPL:{},loading:!1}},methods:{async ApprovePL(){await p.approvePL(this.dataPL.pl_id)},async setStepper(){let e=await JSON.parse(localStorage.getItem("progress"));this.stepper_menu[0].complete=e[0].status,this.stepper_menu[0].link=this.stepper_menu[0].link+e[0].idQT,this.stepper_menu[1].complete=e[1].status,this.stepper_menu[1].link=this.stepper_menu[1].link+e[1].idQT,this.stepper_menu[2].complete=e[2].status,this.stepper_menu[2].link=this.stepper_menu[2].link+e[2].idPL,this.stepper_menu[3].complete=e[3].status,this.stepper_menu[3].link=this.stepper_menu[3].link+e[3].idQT,this.stepper_menu[4].complete=e[4].status,this.stepper_menu[4].link=this.stepper_menu[4].link+e[4].idQT,this.stepper_menu[5].complete=e[5].status,this.stepper_menu[5].link=this.stepper_menu[5].link+e[5].idSO,this.stepper_menu[6].complete=e[6].status,this.stepper_menu[6].link=this.stepper_menu[6].link+e[6].idSO},formatCurrency(e){return e?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e):"Rp.0"},handleFileChange1(e){this.file1=e.target.files[0]},handleFileChange2(e){this.file2=e.target.files[0]},upload1(){const e=new FormData;e.append("file",this.file1),p.UploadCustPO(this.$route.params.id,e)},upload2(){const e=new FormData;e.append("file",this.file2),p.UploadVendQT(this.$route.params.id,e)}},async created(){this.loading=!0,await this.setStepper(),await p.getData(this.$route.params.id),this.dataPL=await p.data_profit,this.dataPL.status!==1&&(this.aprove=!0),this.loading=!1,console.log(this.dataPL)}},a=e=>(D("data-v-5736e713"),e=e(),M(),e),W={class:"flex gap-5"},X={key:1,class:"flex gap-3"},Z={class:"px-20 py-10 w-full flex justify-center items-center"},$={class:"w-full px-10 py-10 bg-white rounded-xl mt-5"},tt={class:"w-full flex justify-between"},et={class:"w-full"},st={class:"font-bold text-lg"},ot=a(()=>t("b",null,"Quotation Status #:",-1)),at={class:"flex w-1/2 gap-5 justify-center items-center"},it={class:"w-full mt-10"},lt={class:"relative overflow-x-auto"},ct=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 font-semibold"}," Profit & Loss Items ",-1)),nt={class:"w-full text-sm text-left rtl:text-right text-gray-500 mt-2"},rt=a(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Vendor "),t("th",{scope:"col",class:"px-6 py-3"}," product "),t("th",{scope:"col",class:"px-6 py-3"}," QTY "),t("th",{scope:"col",class:"px-6 py-3"}," COGS Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Total COGS Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Selling Unit Price "),t("th",{scope:"col",class:"px-6 py-3"}," Total Selling Unit Price ")])],-1)),_t={class:"px-6 py-4 text-xs"},dt={class:"mb-2"},pt={class:""},ut={class:"px-6 py-4 text-xs grid grid-rows-3 gap-2"},ht={class:""},ft={class:""},mt={class:"px-6 py-4"},xt={class:"px-6 py-4 text-right"},yt={class:"px-6 py-4 text-right"},wt={class:"px-6 py-4 text-right"},gt={class:"px-6 py-4 text-right"},vt={class:"grid grid-cols-3 gap-2 border-b pb-2"},Pt={class:"w-full"},bt=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Hardware ",-1)),Lt={class:"w-full px-5"},kt={class:"w-full flex justify-start text-gray-500"},Ct={class:"flex justify-between gap-10 mt-5 w-[300px]"},jt=a(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),St={class:"w-1/2 text-end"},Tt={class:"w-full flex justify-start text-gray-500"},Dt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Mt=a(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),Bt={class:"w-1/2 text-end"},Ot={class:"w-full flex justify-start text-gray-500"},It={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ft=a(()=>t("h1",{class:"w-1/2"},"Margin",-1)),Qt={class:"w-1/2 text-end"},Vt={class:"w-full flex justify-start text-gray-500"},Gt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Nt=a(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),Ut={class:"w-1/2 text-end"},zt={class:"w-full"},At=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Service ",-1)),Rt={class:"w-full px-5"},qt={class:"w-full flex justify-start text-gray-500"},Ht={class:"flex justify-between gap-10 mt-5 w-[300px]"},Et=a(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),Jt={class:"w-1/2 text-end"},Yt={class:"w-full flex justify-start text-gray-500"},Kt={class:"flex justify-between gap-10 mt-5 w-[300px]"},Wt=a(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),Xt={class:"w-1/2 text-end"},Zt={class:"w-full flex justify-start text-gray-500"},$t={class:"flex justify-between gap-10 mt-5 w-[300px]"},te=a(()=>t("h1",{class:"w-1/2"},"Margin",-1)),ee={class:"w-1/2 text-end"},se={class:"w-full flex justify-start text-gray-500"},oe={class:"flex justify-between gap-10 mt-5 w-[300px]"},ae=a(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),ie={class:"w-1/2 text-end"},le={class:"w-full"},ce=a(()=>t("div",{class:"w-full bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold"}," Price Maintenance ",-1)),ne={class:"w-full px-5"},re={class:"w-full flex justify-start text-gray-500"},_e={class:"flex justify-between gap-10 mt-5 w-[300px]"},de=a(()=>t("h1",{class:"w-1/2"},"COGS Price",-1)),pe={class:"w-1/2 text-end"},ue={class:"w-full flex justify-start text-gray-500"},he={class:"flex justify-between gap-10 mt-5 w-[300px]"},fe=a(()=>t("h1",{class:"w-1/2"},"Selling Price",-1)),me={class:"w-1/2 text-end"},xe={class:"w-full flex justify-start text-gray-500"},ye={class:"flex justify-between gap-10 mt-5 w-[300px]"},we=a(()=>t("h1",{class:"w-1/2"},"Margin",-1)),ge={class:"w-1/2 text-end"},ve={class:"w-full flex justify-start text-gray-500"},Pe={class:"flex justify-between gap-10 mt-5 w-[300px]"},be=a(()=>t("h1",{class:"w-1/2"},"Percentage",-1)),Le={class:"w-1/2 text-end"},ke=a(()=>t("div",{class:"w-full flex justify-end"},[t("div",{class:"bg-gray-50 text-gray-700 px-5 py-3 mt-2 font-semibold text-right"}," Total Price Hardware, Services & Maintenance ")],-1)),Ce={class:"flex justify-end"},je={class:"px-5"},Se={class:"w-full flex justify-start text-gray-500"},Te={class:"flex justify-between gap-10 mt-5 w-[300px]"},De=a(()=>t("h1",{class:"w-1/2"},"Total COGS",-1)),Me={class:"w-1/2 text-end"},Be={class:"w-full flex justify-start text-gray-500"},Oe={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ie=a(()=>t("h1",{class:"w-1/2"},"Total Selling",-1)),Fe={class:"w-1/2 text-end"},Qe={class:"w-full flex justify-start text-gray-500"},Ve={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ge=a(()=>t("h1",{class:"w-1/2"},"Total Margin",-1)),Ne={class:"w-1/2 text-end"},Ue={class:"w-full flex justify-start text-gray-500"},ze={class:"flex justify-between gap-10 mt-5 w-[300px]"},Ae=a(()=>t("h1",{class:"w-1/2"},"Total Percentage",-1)),Re={class:"w-1/2 text-end"};function qe(e,y,He,Ee,o,i){const w=n("Loading"),g=n("ButtonLink"),u=n("Button"),v=n("MenuCard"),P=n("Stepper"),b=n("Default");return o.loading?(r(),h(w,{key:0})):(r(),h(b,{key:1},{default:c(()=>{var m,x;return[_(v,{menuLabel:"Profit & Loss"},{default:c(()=>[t("div",W,[o.aprove?(r(),h(g,{key:0,type:"secondary",size:"small",to:"/sales-order/detail/"+o.dataPL.pl_id},{default:c(()=>[d(" Next")]),_:1},8,["to"])):(r(),f("div",X,[_(u,{type:"success",onClick:i.ApprovePL,icon_position:"left",size:"small",icon_name:"Check"},{default:c(()=>[d(" Approve ")]),_:1},8,["onClick"]),_(u,{type:"danger",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Ban"},{default:c(()=>[d(" Reject ")]),_:1},8,["onClick"])]))])]),_:1}),t("div",Z,[_(P,{menu:o.stepper_menu},null,8,["menu"])]),t("div",$,[t("div",tt,[t("div",et,[t("h1",st,s((m=o.dataPL.customer)==null?void 0:m.customer_name),1),t("h1",null,s((x=o.dataPL.customer)==null?void 0:x.customer_building),1),t("h1",null,[ot,d(" "+s(o.dataPL.quotation.status),1)])]),t("div",at,[_(u,{type:"secondary",class:"w-fit h-fit",c:"",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:c(()=>[d(" Customer PO ")]),_:1},8,["onClick"]),_(u,{type:"secondary",class:"w-fit h-fit",onClick:e.submitForm,icon_position:"left",size:"small",icon_name:"Download"},{default:c(()=>[d(" Vendor QT ")]),_:1},8,["onClick"])])]),t("div",it,[t("div",lt,[ct,t("table",nt,[rt,t("tbody",null,[(r(!0),f(T,null,S(o.dataPL.profit_and_loss_item,(l,L)=>(r(),f("tr",{class:"bg-white border-b",key:L},[t("td",_t,[t("h1",dt,s(l.vendor.vendor_name),1),t("h1",pt,s(l.vendor_pic.title+l.vendor_pic.contact_name),1)]),t("td",ut,[t("h1",ht,s(l.product.product_number),1),t("h1",ft,s(l.product.product_description),1)]),t("td",mt,s(l.quantity+" "+l.uom),1),t("td",xt,s(i.formatCurrency(l.unit_cogs_price)),1),t("td",yt,s(i.formatCurrency(l.total_cogs_price)),1),t("td",wt,s(i.formatCurrency(l.unit_selling_price)),1),t("td",gt,s(i.formatCurrency(l.total_selling_price)),1)]))),128))])]),t("div",vt,[t("div",Pt,[bt,t("div",Lt,[t("div",kt,[t("div",Ct,[jt,t("h1",St,s(i.formatCurrency(o.dataPL.cogs_price_hardware)),1)])]),t("div",Tt,[t("div",Dt,[Mt,t("h1",Bt,s(i.formatCurrency(o.dataPL.selling_price_hardware)),1)])]),t("div",Ot,[t("div",It,[Ft,t("h1",Qt,s(i.formatCurrency(o.dataPL.margin_hardware)),1)])]),t("div",Vt,[t("div",Gt,[Nt,t("h1",Ut,s(Math.ceil(o.dataPL.percentage_hardware))+"%",1)])])])]),t("div",zt,[At,t("div",Rt,[t("div",qt,[t("div",Ht,[Et,t("h1",Jt,s(i.formatCurrency(o.dataPL.cogs_price_service)),1)])]),t("div",Yt,[t("div",Kt,[Wt,t("h1",Xt,s(i.formatCurrency(o.dataPL.selling_price_service)),1)])]),t("div",Zt,[t("div",$t,[te,t("h1",ee,s(i.formatCurrency(o.dataPL.margin_service)),1)])]),t("div",se,[t("div",oe,[ae,t("h1",ie,s(Math.ceil(o.dataPL.percentage_service))+"%",1)])])])]),t("div",le,[ce,t("div",ne,[t("div",re,[t("div",_e,[de,t("h1",pe,s(i.formatCurrency(o.dataPL.cogs_price_maintenance)),1)])]),t("div",ue,[t("div",he,[fe,t("h1",me,s(i.formatCurrency(o.dataPL.selling_price_maintenance)),1)])]),t("div",xe,[t("div",ye,[we,t("h1",ge,s(i.formatCurrency(o.dataPL.margin_maintenance)),1)])]),t("div",ve,[t("div",Pe,[be,t("h1",Le,s(Math.ceil(o.dataPL.percentage_maintenance))+"%",1)])])])])]),ke,t("div",Ce,[t("div",je,[t("div",Se,[t("div",Te,[De,t("h1",Me,s(i.formatCurrency(o.dataPL.total_cogs)),1)])]),t("div",Be,[t("div",Oe,[Ie,t("h1",Fe,s(i.formatCurrency(o.dataPL.total_selling)),1)])]),t("div",Qe,[t("div",Ve,[Ge,t("h1",Ne,s(i.formatCurrency(o.dataPL.total_margin)),1)])]),t("div",Ue,[t("div",ze,[Ae,t("h1",Re,s(Math.ceil(o.dataPL.total_percentage))+"%",1)])])])])])])])]}),_:1}))}const hs=j(K,[["render",qe],["__scopeId","data-v-5736e713"]]);export{hs as default};
